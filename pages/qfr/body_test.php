	<section class="main">
		<section class="tab-content" id="tab-content">	
		   <section class="tab-pane active fade in content" id="qfr">
				<div class="row">
				   <div class="col-xs-12">
						<legend><a href="#" id="a_menu"><i class="fa fa-file"></i> Quality Report Feedback</a></legend>
					    <ol class="breadcrumb">
						  <li id="bc_menu"><a href="#" class="active"><i class="fa fa-home"></i> Home</a></li>
						  <li id="bc_ng"><a href="#"><i class="fa fa-file"></i> NG Report </a></li>
						  <li id="bc_sa"><a href="#"><i class="fa fa-file"></i> Special Acceptance</a></li>
						  <li id="bc_ptis"><a href="#"><i class="fa fa-file"></i> PTIS</a></li>
						  <li id="bc_itn"><a href="#"><i class="fa fa-file"></i> ITN / QCFR / Attention Tag / 8D / CAPA Monitoring Report</a></li>
						  <li id="bc_ccr"><a href="#"><i class="fa fa-file"></i> Customer Claim Response</a></li>
						  <li id="bc_lcd"><a href="#"><i class="fa fa-file"></i> Loss Cost Data</a></li>
						</ol>
						<div class="row" id="container_menu">
						   <div class="col-xs-12">
								<div class="col-xs-12 col-sm-6 col-lg-4">
									<div class="panel panel-info">
									  <div class="panel-heading">
										<div class="row">
										  <div class="col-xs-2">
											<i class="fa fa-file fa-5x"></i>
										  </div>
										  <div class="col-xs-10 text-right">
											<p class="announcement-heading"></p>
											<p class="announcement-text fa-lg"> NG Report</p>
										  </div>
										</div>
									  </div>
									  <a href="#" id="a_ng">
										<div class="panel-footer announcement-bottom">
										  <div class="row">
											<div class="col-xs-6">
											  Open
											</div>
											<div class="col-xs-6 text-right">
											  <i class="fa fa-arrow-circle-right"></i>
											</div>
										  </div>
										</div>
									  </a>
									</div>
								</div>
								
								<div class="col-xs-12 col-sm-6 col-lg-4">
									<div class="panel panel-info">
									  <div class="panel-heading">
										<div class="row">
										  <div class="col-xs-2">
											<i class="fa fa-file fa-5x"></i>
										  </div>
										  <div class="col-xs-10 text-right">
											<p class="announcement-heading"></p>
											<p class="announcement-text fa-lg"> Special Acceptance</p>
										  </div>
										</div>
									  </div>
									  <a href="#" id="a_sa">
										<div class="panel-footer announcement-bottom">
										  <div class="row">
											<div class="col-xs-6">
											  Open
											</div>
											<div class="col-xs-6 text-right">
											  <i class="fa fa-arrow-circle-right"></i>
											</div>
										  </div>
										</div>
									  </a>
									</div>
								</div>

								<div class="col-xs-12 col-sm-6 col-lg-4">
									<div class="panel panel-info">
									  <div class="panel-heading">
										<div class="row">
										  <div class="col-xs-2">
											<i class="fa fa-cogs fa-5x"></i>
										  </div>
										  <div class="col-xs-10 text-right">
											<p class="announcement-heading"></p>
											<p class="announcement-text fa-lg"> PTIS</p>
										  </div>
										</div>
									  </div>
									  <a href="#" id="a_ptis">
										<div class="panel-footer announcement-bottom">
										  <div class="row">
											<div class="col-xs-6">
											  Open
											</div>
											<div class="col-xs-6 text-right">
											  <i class="fa fa-arrow-circle-right"></i>
											</div>
										  </div>
										</div>
									  </a>
									</div>
								</div>
								
								<div class="col-xs-12 col-sm-6 col-lg-4">
									<div class="panel panel-info">
									  <div class="panel-heading">
										<div class="row">
										  <div class="col-xs-2">
											<i class="fa fa-file fa-5x"></i>
										  </div>
										  <div class="col-xs-10 text-right">
											<p class="announcement-heading"></p>
											<p class="announcement-text fa-lg"> ITN / QCFR / Attention Tag / 8D / CAPA Monitoring Report</p>
										  </div>
										</div>
									  </div>
									  <a href="#" id="a_itn">
										<div class="panel-footer announcement-bottom">
										  <div class="row">
											<div class="col-xs-6">
											  Open
											</div>
											<div class="col-xs-6 text-right">
											  <i class="fa fa-arrow-circle-right"> </i>
											</div>
										  </div>
										</div>
									  </a>
									</div>
								</div>
								
								<div class="col-xs-12 col-sm-6 col-lg-4">
									<div class="panel panel-info">
									  <div class="panel-heading">
										<div class="row">
										  <div class="col-xs-2">
											<i class="fa fa-file fa-5x"></i>
										  </div>
										  <div class="col-xs-10 text-right">
											<p class="announcement-heading"></p>
											<p class="announcement-text fa-lg">  Customer Claim Response</p>
										  </div>
										</div>
									  </div>
									  <a href="#" id="a_ccr">
										<div class="panel-footer announcement-bottom">
										  <div class="row">
											<div class="col-xs-6">
											  Open
											</div>
											<div class="col-xs-6 text-right">
											  <i class="fa fa-arrow-circle-right"></i>
											</div>
										  </div>
										</div>
									  </a>
									</div>
								</div>
								
								<div class="col-xs-12 col-sm-6 col-lg-4">
									<div class="panel panel-info">
									  <div class="panel-heading">
										<div class="row">
										  <div class="col-xs-2">
											<i class="fa fa-file fa-5x"></i>
										  </div>
										  <div class="col-xs-10 text-right">
											<p class="announcement-heading"></p>
											<p class="announcement-text fa-lg">  Loss cost data</p>
										  </div>
										</div>
									  </div>
									  <a href="#" id="a_lcd">
										<div class="panel-footer announcement-bottom">
										  <div class="row">
											<div class="col-xs-6">
											  Open
											</div>
											<div class="col-xs-6 text-right">
											  <i class="fa fa-arrow-circle-right"></i>
											</div>
										  </div>
										</div>
									  </a>
									</div>
								</div>

							</div>
						</div>
				   </div>
				</div>
				
				
				<div class="row" id="container_ng">
					<div>
						<!-- Nav tabs -->
						<div class="container-fluid">
							<ul class="nav nav-tabs" role="tablist">
								<li role="presentation" class="active"><a href="#pending" aria-controls="pending" role="tab" data-toggle="tab">Pending NG Reports</a></li>
								<li role="presentation"><a href="#ng_report" aria-controls="ng_report" role="tab" data-toggle="tab">NG Report</a></li>
							</ul>
						</div>
						
						<!-- Tab panes -->
						<div class="tab-content">
							<div role="tabpanel" class="tab-pane active" id="pending">
								<div class="col-sm-12">
									<div class="panel panel-info">
										<div class="panel-heading"><i class="fa fa-file fa-lg"> For Filling NG Report</i></div>
										<div class="panel-body">
											<div class="row">
												<div class="col-sm-12"><br />
													<table class="table table-bordered table-condensed" id="tbl_ng_for_filling">
														<thead>
                                                            <th>Inspection Date</th>
                                                            <th>Inspection Time</th>
                                                            <th>Sub</th>
															<th><center>Invoice #</center></th>
															<th><center>Part Code</center></th>
															<th><center>Part Name</center></th>
															<th><center>Lot Number</center></th>
															<th><center>Supplier</center></th>
															<th><center>Action</center></th>
														</thead>
													</table>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div role="tabpanel" class="tab-pane" id="ng_report">
								<div class="col-sm-12">
									<div class="panel panel-info">
										<div class="panel-heading"><i class="fa fa-file fa-lg"> NG Report</i></div>
										<div class="panel-body">
                                            <div class="row container-fluid">
                                                <!--<div class="col-sm-12 col-lg-1">
                                                    <label class="fa fa-lg">Legend</label>
                                                </div>
                                                <div class="col-sm-12 col-lg-2 btn-group">
                                                  <button class="btn btn-warning" disabled type="button"> </button>
                                                  <button class="btn btn-default" type="button" id="btn_ng_load_for_approval">FOR APPROVAL</button>
                                                </div>
                                                <div class="col-sm-12 col-lg-2 btn-group">
                                                  <button class="btn btn-info" disabled type="button"> </button>
                                                  <button class="btn btn-default" type="button" id="btn_ng_load_approved">APPROVED</button>
                                                </div>
                                                <div class="col-sm-12 col-lg-2 btn-group">
                                                  <button class="btn btn-danger" disabled type="button"> </button>
                                                  <button class="btn btn-default" type="button" id="btn_ng_load_disapproved">DISAPPROVED</button>
                                                </div>
                                                <div class="col-sm-12 col-lg-2 btn-group">
                                                  <button class="btn btn-danger" disabled type="button"> </button>
                                                  <button class="btn btn-default" type="button" id="btn_ng_load_no_final_reply">NO FINAL REPLY</button>
                                                </div>
                                                <div class="col-sm-12 col-lg-2 btn-group">
                                                  <button class="btn btn-success" disabled type="button"> </button>
                                                  <button class="btn btn-default" type="button" id="btn_ng_load_with_treatment">WITH TREATMENT/FINAL REPLY</button>
                                                    <br>*Kulang pa ang display ng Waiting Disposition at eklaber!
                                                    paayos naman oh hahahaha. napapangitan ako ee
                                                </div>
                                            </div><br />-->
											<div class="row">
												<div class="col-sm-9">
													<button class="btn btn-default fa fa-search"> Search</button>
												</div>
												<div class="col-sm-3">
													<button class="btn btn-info fa-pull-right" id="btn_report_ng"><i class="fa fa-files-o"></i> Report</button>
													<button class="btn btn-success fa-pull-right" id="btn_upload_ng"><i class="fa fa-upload"></i> Upload File</button>
												</div>
											</div>
											<div class="row">
												<div class="col-sm-12"><br />
													<table class="table table-bordered table-condensed" id="tbl_ng">
														<thead>
															<th><center>Status</center></th>
															<th><center>Issuance #</center></th>
															<th><center>Invoice #</center></th>
															<th><center>Part Code</center></th>
															<th><center>Part Name</center></th>
															<th><center>Lot Number</center></th>
															<th><center>Treatment</center></th>
															<th><center>Final Disposition</center></th>
															<th><center>Supplier</center></th>
															<th><center>Approvers</center></th>
															<th><center>Action</center></th>
														</thead>
													</table>
												</div>
											</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					
				</div>
				
				<div class="row" id="container_sa">
					<div class="col-sm-12">
						<div class="panel panel-info">
							<div class="panel-heading"><i class="fa fa-file fa-lg"> Special Acceptance</i></div>
							<div class="panel-body">
								<div class="row">
									<div class="col-sm-12">
										<button class="btn btn-primary fa fa-plus pull-right" id="btn_sa"> New Special Acceptance</button>
									</div>	
								</div><br />
								<div class="row">
									<div class="col-sm-12">
										<table class="table table-condensed table-bordered" id="tbl_special_acceptance">
											<thead>
												<tr>
													<th>Control Number</th>
													<th>Parts and Product Details</th>
													<th>Judgement Application</th>
													<th>Judged By</th>
													<th>Notation / Remarks</th>
													<th><span class="fa fa-attachment"></span> File Attachment</th>
													<th><span class="fa fa-cogs"></span></th>
												</tr>
											</thead>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				
				<div class="row" id="container_ptis">
					<div class="col-sm-12">
						<div class="panel panel-info">
							<div class="panel-heading"><i class="fa fa-file fa-lg"> PTIS</i></div>
							<div class="panel-body">
						
							</div>
						</div>
					</div>
				</div>
				
				<div class="row" id="container_itn">
					<div>
					  <div class="container-fluid">
						  <!-- Nav tabs -->
						  <ul class="nav nav-tabs" role="tablist">
							<li role="presentation"><a href="#itn_itn" aria-controls="itn_itn" role="tab" data-toggle="tab">ITN</a></li>
							<li role="presentation"><a href="#itn_qcfr" aria-controls="itn_qcfr" role="tab" data-toggle="tab">QCFR</a></li>
							<li role="presentation" class="active"><a href="#itn_attention_tag" aria-controls="itn_attention_tag" role="tab" data-toggle="tab">Attention Tag</a></li>
							<li role="presentation"><a href="#itn_8d" aria-controls="itn_8d" role="tab" data-toggle="tab">8D</a></li>
							<li role="presentation"><a href="#itn_capa" aria-controls="itn_capa" role="tab" data-toggle="tab">CAPA Monitoring Report</a></li>
						  </ul>
					  </div>
					  <!-- Tab panes -->
					  <div class="tab-content">
						<div role="tabpanel" class="tab-pane" id="itn_itn">
							<div class="col-sm-12">
								<div class="panel panel-default">
									<div class="panel-heading"><i class="fa fa-file fa-lg"> ITN</i></div>
									<div class="panel-body">
										
									</div>
								</div>
							</div>
						</div>
						<div role="tabpanel" class="tab-pane" id="itn_qcfr">
							<div class="col-sm-12">
								<div class="panel panel-default">
									<div class="panel-heading"><i class="fa fa-file fa-lg"> QCFR</i></div>
									<div class="panel-body">
										
									</div>
								</div>
							</div>
						</div>
						<div role="tabpanel" class="tab-pane active" id="itn_attention_tag">
							<div class="col-sm-12">
								<div class="panel panel-default">
									<div class="panel-heading" style=""><i class="fa fa-file fa-lg"> Attention Tag</i></div>
									<div class="panel-body">
										<button type="button" class="btn btn-primary fa fa-plus pull-right" id="btn_attention_tag_new"> New Attention Tag</button><br /><br />
										<table class="table table-condensed table-striped table-bordered" id="tbl_attention_tag"> 
											<thead>
												<tr>
													<th>Control #</th>
													<th>Date</th>
													<th>Category</th>
													<th>Product</th>
													<th>Issued By</th>
													<th>Description</th>
													<th>Download</th>
													<th><span class="fa fa-cogs"></span></th>
												</tr>
											</thead>
											<tbody>
											</tbody>
										</table> 
									</div>
								</div>
							</div>
						</div>
						<div role="tabpanel" class="tab-pane" id="itn_8d">
							<div class="col-sm-12">
								<div class="panel panel-default">
									<div class="panel-heading"><i class="fa fa-file fa-lg"> 8D</i></div>
									<div class="panel-body">
										
									</div>
								</div>
							</div>
						</div>
						<div role="tabpanel" class="tab-pane" id="itn_capa">
							<div class="col-sm-12">
								<div class="panel panel-default">
									<div class="panel-heading"><i class="fa fa-file fa-lg"> CAPA Monitoring Report</i></div>
									<div class="panel-body">
										
									</div>
								</div>
							</div>
						</div>
					  </div>
					</div>
				</div>
				
				<div class="row" id="container_ccr">
					<div class="col-sm-12">
						<div class="panel panel-info">
							<div class="panel-heading"><i class="fa fa-file fa-lg"> Customer Claim Response</i></div>
							<div class="panel-body">
						
							</div>
						</div>
					</div>
				</div>
				
				<div class="row" id="container_lcd">
					<div class="col-sm-12">
						<div class="panel panel-info">
							<div class="panel-heading"><i class="fa fa-file fa-lg"> Loss Cost Data</i></div>
							<div class="panel-body">
								
							</div>
						</div>
					</div>
				</div>
			</section>
			
		   
		</section>
		
	</section>

<!---------------------
	Modals - Start 
---------------------->
<div class="modal fade" tabindex="-1" role="dialog" id="modal_upload_ng">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"><i class="fa fa-upload"></i> Upload File</h4>
      </div>
	  <form id="frm_upload_ng" method="post" enctype="multipart/form-data">
		  <div class="modal-body">
			<div class="row">
				<div class="col-sm-12">
					<div class="alert alert-danger" style="display:none;" role="alert" id="container_upload_ng_message">					
					</div>
				</div>				
				<div class="col-sm-2 col-md-offset-6">
					<label class="fa fa-md">Issuance No.: </label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control" id="issuance_no_ng" name="issuance_no_ng" readOnly required>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Issuance Date: </label>
				</div>
				<div class="col-sm-4">
					<input type="date" class="form-control" id="issuance_date_ng" name="issuance_date_ng" required>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Supplier: </label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control" id="supplier_ng" name="supplier_ng" required>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Invoice Number: </label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control" id="invoice_no_ng" name="invoice_no_ng" list="list_invoice_no_ng" required>
					<datalist id="list_invoice_no_ng"></datalist>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Lot Number: </label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control" id="lot_no_ng" name="lot_no_ng" required>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Part Code: </label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control" id="part_code_ng" name="part_code_ng" list="list_part_code" required>
                    <datalist id="list_part_code"></datalist>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Part Name: </label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control" id="part_name_ng" name="part_name_ng" readOnly required>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Choose File: </label>
				</div>
				<div class="col-sm-4">
					<input type="file" class="form-control" id="file_ng" name="file_ng" accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" required>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Drawing Number: </label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control" id="drawing_number_ng" name="drawing_number_ng" required>
				</div>
              </div>
              <div class="row">
				<div class="col-sm-2">
					<label class="fa fa-md">Remarks: </label>
				</div>
				<div class="col-sm-10">
					<textarea class="form-control" id="remarks_ng" name="remarks_ng"></textarea>
				</div>
				<div class="col-sm-12" style="padding-top:5px;">
					<table class="table table-striped table-bordered table-condensed" id="tbl_approver_ng">
						<thead>
							<th style="width:15%"><center>Order</center></th>
							<th style="width:85%"><center>Approver Name</center></th>
						</thead>
						<tbody>
						</tbody>
					</table>
				</div>
			</div>
		  </div>
		  <div class="modal-footer">
			<button type="submit" class="btn btn-primary fa fa-upload"> Upload</button>
			<button type="button" class="btn btn-default fa" data-dismiss="modal"> Close</button>
		  </div>
		</form><!-- /#frm_upload_measdata -->
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" tabindex="-1" role="dialog" id="modal_upload_ng_edit">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"><i class="fa fa-upload"></i> Edit / View NG Report</h4>
      </div>
	  <form id="frm_upload_ng_update" method="post" enctype="multipart/form-data">
		  <div class="modal-body">
			<div class="row">
				<div class="col-sm-12">
					<div class="alert alert-danger" style="display:none;" role="alert" id="container_upload_ng_message_edit">					
					</div>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Issuance Status: </label>
				</div>
				<div class="col-sm-4">
					<span class="label label-success" id="lbl_ng_status_edit"></span>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Issuance No.: </label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control" id="issuance_no_ng_edit" name="issuance_no_ng" readOnly required>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Issuance Date: </label>
				</div>
				<div class="col-sm-4">
					<input type="date" class="form-control" id="issuance_date_ng_edit" name="issuance_date_ng" required>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Supplier: </label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control" id="supplier_ng_edit" name="supplier_ng" required>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Invoice Number: </label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control" id="invoice_no_ng_edit" name="invoice_no_ng" required>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Lot Number: </label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control" id="lot_no_ng_edit" name="lot_no_ng" required>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Part Code: </label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control" id="part_code_ng_edit" name="part_code_ng" required>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Part Name: </label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control" id="part_name_ng_edit" name="part_name_ng" readOnly required>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md"><input type="checkbox" id="chk_reupload"> Re-upload: </label>
				</div>
				<div class="col-sm-4">
					<input type="file" id="file_ng_edit" name="file_ng" style="display:none;width:80%;display:inline-block;" accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel">
					<button type="button" class="btn btn-link fa fa-paperclip" id="btn_attachment_ng_edit" style="display:inline-block;"> </button>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Drawing Number: </label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control" id="drawing_number_ng_edit" name="drawing_number_ng" required>
				</div>
              </div>
              <div class="row">
				<div class="col-sm-2">
					<label class="fa fa-md">Remarks: </label>
				</div>
				<div class="col-sm-10">
					<textarea class="form-control" id="remarks_ng_edit" name="remarks_ng"></textarea>
				</div>
				<div class="col-sm-12" style="padding-top:5px;">
					<table class="table table-striped table-bordered table-condensed" id="tbl_approver_ng_edit">
						<thead>
							<th style="width:10%"><center>Order</center></th>
							<th style="width:10%"><center>Status</center></th>
							<th style="width:30%"><center>Approver Name</center></th>
							<th style="width:40%"><center>Approver's Remarks</center></th>
							<th style="width:40%"><center>Approver's Log</center></th>
						</thead>
						<tbody>
						</tbody>
					</table>
				</div>
			</div>
		  </div>
		  <div class="modal-footer">
			<button type="submit" class="btn btn-primary fa fa-save" id="btn_ng_report_edit"> Update</button>
			<button type="button" class="btn btn-info fa fa-send-o" id="btn_ng_send_supplier"> For Send</button>
			<button type="button" class="btn btn-success fa fa-plus-circle" id="btn_ng_add_disposition"> Add Disposition</button>
			<button type="button" class="btn btn-default fa fa-close" data-dismiss="modal"> Close</button>
		  </div>
		</form><!-- /#frm_upload_measdata -->
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" tabindex="-1" role="dialog" id="modal_approver_ng_view">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"><i class="fa fa-upload"></i> View NG Report Request</h4>
      </div>
	  <div class="modal-body">
		<div class="row">
			<div class="col-sm-12">
				<div class="alert alert-danger" style="display:none;" role="alert" id="container_upload_ng_message_view">					
				</div>
			</div>
			<div class="col-sm-2">
				<label class="fa fa-md">Issuance Status: </label>
			</div>
			<div class="col-sm-4">
				<span class="label label-success" id="lbl_ng_status_view"></span>
			</div>
			<div class="col-sm-2">
				<label class="fa fa-md">Issuance No.: </label>
			</div>
			<div class="col-sm-4">
				<input type="text" class="form-control" id="issuance_no_ng_view" name="issuance_no_ng_view" readOnly>
			</div>
			<div class="col-sm-2">
				<label class="fa fa-md">Issuance Date: </label>
			</div>
			<div class="col-sm-4">
				<input type="date" class="form-control" id="issuance_date_ng_view" name="issuance_date_ng_view" readOnly>
			</div>
			<div class="col-sm-2">
				<label class="fa fa-md">Supplier: </label>
			</div>
			<div class="col-sm-4">
				<input type="text" class="form-control" id="supplier_ng_view" name="supplier_ng_view" readOnly>
			</div>
			<div class="col-sm-2">
                <label class="fa fa-md">Invoice Number: </label>
            </div>
            <div class="col-sm-4">
                <input type="text" class="form-control" id="invoice_no_ng_view" name="invoice_no_ng" required>
            </div>
            <div class="col-sm-2">
                <label class="fa fa-md">Lot Number: </label>
            </div>
            <div class="col-sm-4">
                <input type="text" class="form-control" id="lot_no_ng_view" name="lot_no_ng" required>
            </div>
            <div class="col-sm-2">
                <label class="fa fa-md">Part Code: </label>
            </div>
            <div class="col-sm-4">
                <input type="text" class="form-control" id="part_code_ng_view" name="part_code_ng" required>
            </div>
            <div class="col-sm-2">
                <label class="fa fa-md">Part Name: </label>
            </div>
            <div class="col-sm-4">
                <input type="text" class="form-control" id="part_name_ng_view" name="part_name_ng" readOnly required>
            </div>
			<div class="col-sm-2">
				<label class="fa fa-md"> Report: </label>
			</div>
			<div class="col-sm-4">
				<button type="button" class="btn btn-link fa fa-paperclip" id="btn_attachment_ng_view"> </button>
			</div>
			<div class="col-sm-2">
				<label class="fa fa-md">Drawing Number: </label>
			</div>
			<div class="col-sm-4">
				<input type="text" class="form-control" id="drawing_number_ng_view" name="drawing_number_ng_view" readOnly>
			</div>
			<div class="col-sm-2">
				<label class="fa fa-md">Remarks: </label>
			</div>
			<div class="col-sm-10">
				<textarea class="form-control" id="remarks_ng_view" name="remarks_ng_view" readOnly></textarea>
			</div>
			<div class="col-sm-12" style="padding-top:5px;">
				<table class="table table-striped table-bordered table-condensed" id="tbl_approver_ng_view">
					<thead>
						<th style="width:10%"><center>Order</center></th>
						<th style="width:10%"><center>Status</center></th>
						<th style="width:30%"><center>Approver Name</center></th>
						<th style="width:40%"><center>Approver's Remarks</center></th>
						<th style="width:40%"><center>Approver's Log</center></th>
					</thead>
					<tbody>
					</tbody>
				</table>
			</div>
		</div>
	  </div>
	  <div class="modal-footer">
		<button type="button" class="btn btn-success fa fa-thumbs-o-up" id="btn_ng_approve"> Approve</button>
		<button type="button" class="btn btn-danger fa fa-thumbs-o-down" id="btn_ng_disapprove"> Disapprove</button>
		<button type="button" class="btn btn-success fa fa-eye" id="btn_ng_view_disposition"> View Disposition</button>
		<button type="button" class="btn btn-default fa fa-close" data-dismiss="modal"> Close</button>
	  </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" tabindex="-1" role="dialog" id="modal_approver_message">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"><i class="fa fa-question-circle-o"></i> System Confirmation</h4>
      </div>
	  <form id="frm_ng_approvers_decision">
		  <div class="modal-body">
			<div class="row">			
				<div class="col-sm-12" id="">				
					<div class="alert alert-success" role="alert" id="container_approver_message">					
					</div>
				</div>
			</div>
		  </div>
		  <div class="modal-footer">
			<button type="submit" class="btn btn-primary fa fa-save"> Yes</button>
			<button type="button" class="btn btn-default fa fa-close" data-dismiss="modal" id="btn_close"> No</button>
		  </div>
	  </form>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" tabindex="-1" role="dialog" id="modal_ng_report">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"><i class="fa fa-files-o"></i> Extract NG Report</h4>
      </div>
	  <form id="frm_export_ng_report" method="post">
		  <div class="modal-body">
			<div class="row">
				<div class="col-sm-4">
					<label class="fa fa-md">NG Report Type: </label>
				</div>
				<div class="col-sm-8">
					<select class="form-control" id="cmb_ng_report_type" name="ng_report_type" required>
						<option value="dispo_summary">Disposition Summary</option>
						<option value="dispo_leadtime_first">Disposition Leadtime Monitoring (First Response)</option>
						<option value="dispo_leadtime_final">Disposition Leadtime Monitoring (Final Response)</option>
					</select>
				</div>
				<div class="col-sm-4">
					<label class="fa fa-md">Section: </label>
				</div>
				<div class="col-sm-8">
					<select class="chosen-select" multiple id="cmb_ng_section" name="ng_section">
						<option value="IQC">IQC</option>
						<option value="PRDN">PRDN</option>
						<option value="ENGR">ENGR</option>
					</select>
				</div>
				<div class="col-sm-4">
					<label class="fa fa-md">Supplier: </label>
				</div>
				<div class="col-sm-8">
					<select class="form-control" id="cmb_ng_supplier" name="ng_supplier" required>
					</select>
				</div>
				<div class="col-sm-4">
					<label class="fa fa-md">Fiscal Year Start: </label>
				</div>
				<div class="col-sm-8">
					<select class="form-control" id="cmb_ng_fy_start" name="ng_fy_start" required>
					</select>
				</div>
				<div class="col-sm-4">
					<label class="fa fa-md">Fiscal Year End: </label>
				</div>
				<div class="col-sm-8">
					<select class="form-control" id="cmb_ng_fy_end" name="ng_fy_end" required>
					</select>
				</div>
            </div>
		  </div>
		  <div class="modal-footer">
			<button type="submit" class="btn btn-primary fa fa-excel"> Export</button>
			<button type="button" class="btn btn-default fa" data-dismiss="modal"> Close</button>
		  </div>
		</form>
    </div>
  </div>
</div>

<div class="modal fade" tabindex="-1" role="dialog" id="modal_upload_sa">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"><i class="fa fa-upload"></i> Upload File</h4>
      </div>
	  <form id="frm_upload_sa" method="post" enctype="multipart/form-data">
		  <div class="modal-body">
			<div class="row container-fluid">
				<div class="col-sm-12">
					<div class="alert alert-danger" style="display:none;" role="alert" id="container_upload_sa_message">					
					</div>
				</div>
			</div>
			<div class="row container-fluid">
				<div class="col-sm-2">
					<label class="fa fa-md">Category: </label>
				</div>
				<div class="col-sm-4">
					<select class="form-control" id="txt_category" name="category" required>
						<option value=""></option>
						<option value="Parts">Parts</option>
						<option value="Device">Device</option>
					</select>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Choose File: </label>
				</div>
				<div class="col-sm-4">
					<input type="file" class="form-control" id="" name="file_sa" accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" required>
				</div>
			</div>
			<div class="row container-fluid">
				<div id="container_parts">
					<div class="col-sm-2">
						<label class="fa fa-md">Parts Affected: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="parts_affected_parts" readonly>
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Part Code: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="partcode" readonly>
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Problem: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="problem_parts" readonly>
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Supplier: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="supplier" list="" readonly>
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Lot Number: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="lot_number" list="" readonly>
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Quantity: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="quantity" readonly>
					</div>
				</div>
				<div id="container_device">
					<div class="col-sm-2">
						<label class="fa fa-md">Device Name: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="device_name" readonly>
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Problem: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="problem_device" readonly>
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Parts Affected: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="parts_affected_device" readonly>
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">PO #: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="po_number" readonly>
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">PO Qty: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="po_qty" readonly>
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Affected Qty: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="affected_qty" readonly>
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Customer Name: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="customer_name" readonly>
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Shipment Date: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="shipment_date" readonly>
					</div>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Drawing Number: </label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control" id="" name="drawing_number" readonly>
				</div>
              </div>
			  <div class="row container-fluid" id="container_disposition">
				<div class="col-sm-2">
					<label class="fa fa-md">Judgement Application: </label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control" id="" name="judgement_application" readonly>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Judged By: </label>
				</div>
				<div class="col-sm-4">
					<select class="form-control" name="judged_by" required>
						<option value=""></option>
						<option value="YEC QC">YEC QC</option>
						<option value="PMI Technical Adviser">PMI Technical Adviser</option>
						<option value="Others">Others</option>
					</select>
					<!--<input type="text" class="form-control" id="" name="judged_by" readonly>-->
				</div>
				<!--<div class="col-sm-2">
					<label class="fa fa-md">Person In-Charge: </label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control" id="" name="person_in_charge" readonly>
				</div>-->
			  </div>
              <div class="row container-fluid">
				<div class="col-sm-2">
					<label class="fa fa-md">Remarks: </label>
				</div>
				<div class="col-sm-10">
					<textarea class="form-control" id="" name="remarks"></textarea>
				</div>
			</div>
		   </div>
		  <div class="modal-footer">
			<button type="button" id="btn_report_ordinates" class="btn btn-primary fa fa-"> Ordinates</button>
			<button type="submit" class="btn btn-primary fa fa-upload"> Upload</button>
			<button type="button" class="btn btn-default fa" data-dismiss="modal"> Close</button>
		  </div>
		</form><!-- /#frm_upload_measdata -->
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" tabindex="-1" role="dialog" id="modal_sa">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"><i class="fa fa-plus"></i> New Special Acceptance</h4>
      </div>
	  <form id="frm_sa" method="post" enctype="multipart/form-data">
		  <div class="modal-body">
			<div class="row container-fluid">
				<div class="col-sm-12">
					<div class="alert alert-danger" style="display:none;" role="alert" id="container_upload_sa_message">					
					</div>
				</div>
			</div>
			<div class="row container-fluid">
				<div class="col-sm-2">
					<label class="fa fa-md">Category: </label>
				</div>
				<div class="col-sm-4">
					<select class="form-control" id="txt_category" name="category" required>
						<option value=""></option>
						<option value="Parts">Parts</option>
						<option value="Device">Device</option>
					</select>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Choose Image: </label>
				</div>
				<div class="col-sm-4">
					<input type="file" class="form-control" id="" name="file_sa" accept="image/jpeg, image/png" required>
				</div>
			</div>
			<div class="row container-fluid">
				<div id="container_parts">
					<div class="col-sm-2">
						<label class="fa fa-md">Part Code: </label>
					</div>
					<div class="col-sm-4">
						<datalist id="list_sa_part_code"></datalist>
						<input list="list_sa_part_code" type="text" class="form-control" id="" name="partcode">
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Parts Affected: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="parts_affected_parts">
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Problem: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="problem_parts">
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Supplier: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="supplier" list="">
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Lot Number: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="lot_number" list="">
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Quantity: </label>
					</div>
					<div class="col-sm-4">
						<input type="number" class="form-control" id="" name="quantity">
					</div>
				</div>
				<div id="container_device">
					<div class="col-sm-2">
						<label class="fa fa-md">PO #: </label>
					</div>
					<div class="col-sm-4">
						<datalist id="list_sa_po"></datalist>
						<input list="list_sa_po" type="text" class="form-control" id="" name="po_number">
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">PO Qty: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="po_qty" readonly>
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Device Name: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="device_name" readonly>
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Problem: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="problem_device">
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Parts Affected: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="parts_affected_device">
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Affected Qty: </label>
					</div>
					<div class="col-sm-4">
						<input type="number" class="form-control" id="" name="affected_qty">
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Customer Name: </label>
					</div>
					<div class="col-sm-4">
						<input type="text" class="form-control" id="" name="customer_name">
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Shipment Date: </label>
					</div>
					<div class="col-sm-4">
						<input type="date" class="form-control" id="" name="shipment_date">
					</div>
				</div>
				<div class="col-sm-2">
					<label class="fa fa-md">Drawing Number: </label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control" id="" name="drawing_number">
				</div>
              </div>
				<div class="row">
					<div class="col-sm-12">
						<div class="col-sm-2">
							<label class="fa fa-md">Other Details: </label>
						</div>
						<div class="col-sm-10">
							<textarea class="form-control" name="other_details"></textarea>
						</div>
						<div class="col-sm-2">
								<label class="fa fa-md">Judged By: </label>
						</div>
						<div class="col-sm-4">
							<select class="form-control" name="judged_by" required>
								<option value=""></option>
								<option value="YEC QC">YEC QC</option>
								<option value="PMI Technical Adviser">PMI Technical Adviser</option>
								<option value="Others">Others, please specify</option>
							</select>
						</div>
						<div id="container_approver_name">
							<div class="col-sm-2">
									<label class="fa fa-md">Select Approver: </label>
							</div>
							<div class="col-sm-4">
							</div>
						</div>
					</div>
				</div>
				<div class="row container-fluid" id="container_disposition">
					<div class="col-sm-2">
						<label class="fa fa-md">Judgement Application: </label>
					</div>
					<div class="col-sm-4">
						<select class="form-control" name="judgement_application" required>
							<option value=""></option>
							<option value="All incoming Parts">All incoming Parts</option>
							<option value="All incoming P.O.">All incoming P.O.</option>
							<option value="Specific Parts Lot no.">Specific Parts Lot no.</option>
							<option value="Specific Parts Lot no.">Specific Product P.O. no.</option>
							<option value="Others">Others, please specify</option>
						</select>
					</div>
					<div class="col-sm-2">
						<label class="fa fa-md">Remarks: </label>
					</div>
					<div class="col-sm-10">
						<textarea class="form-control" id="" name="remarks"></textarea>
					</div>
				</div>
				<div class="row container-fluid">
				
				</div>
		   </div>
		  <div class="modal-footer">
			<!--<button type="button" id="btn_report_ordinates" class="btn btn-primary fa fa-"> Ordinates</button>-->
			<button type="submit" class="btn btn-primary fa fa-save"> Save</button>
			<button type="button" class="btn btn-default fa" data-dismiss="modal"> Close</button>
		  </div>
		</form><!-- /#frm_upload_measdata -->
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" tabindex="-1" role="dialog" id="modal_sa_edit">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"><i class="fa fa-edit"></i> Edit Special Acceptance</h4>
      </div>
	  <form id="frm_sa_edit" method="post" enctype="multipart/form-data">
		  <div class="modal-body">
			<div class="row container-fluid">
				<div class="col-sm-12">
					<div class="alert alert-danger" style="display:none;" role="alert" id="container_upload_sa_message">					
					</div>
				</div>
			</div>
			<div class="panel panel-info">
				<div class="panel-heading"><label class="fa" id="label_control_number"></label></div>
				<div class="panel-body">
					<div class="row container-fluid">
						<div class="col-sm-2">
							<label class="fa fa-md">Category: </label>
						</div>
						<div class="col-sm-4">
							<select class="form-control" id="txt_category" name="category" required>
								<option value=""></option>
								<option value="Parts">Parts</option>
								<option value="Device">Device</option>
							</select>
						</div>
						<div id="container_uploaded_image">
							<div class="col-sm-2">
								<label class="fa fa-md">Uploaded Image: </label>
							</div>
							<div class="col-sm-4">
								<a href="#" id="uploaded_image" target="_blank"></a>
								<button type="button" class="btn btn-default fa fa-image pull-right" id="replace_image"> Replace</button>
							</div>
						</div>
					</div>
					<div class="row container-fluid">
						<div id="container_parts">
							<div class="col-sm-2">
								<label class="fa fa-md">Part Code: </label>
							</div>
							<div class="col-sm-4">
								<input type="text" class="form-control" id="" name="partcode">
							</div>
							<div class="col-sm-2">
								<label class="fa fa-md">Parts Affected: </label>
							</div>
							<div class="col-sm-4">
								<input type="text" class="form-control" id="" name="parts_affected_parts">
							</div>
							<div class="col-sm-2">
								<label class="fa fa-md">Problem: </label>
							</div>
							<div class="col-sm-4">
								<input type="text" class="form-control" id="" name="problem_parts">
							</div>
							<div class="col-sm-2">
								<label class="fa fa-md">Supplier: </label>
							</div>
							<div class="col-sm-4">
								<input type="text" class="form-control" id="" name="supplier" list="">
							</div>
							<div class="col-sm-2">
								<label class="fa fa-md">Lot Number: </label>
							</div>
							<div class="col-sm-4">
								<input type="text" class="form-control" id="" name="lot_number" list="">
							</div>
							<div class="col-sm-2">
								<label class="fa fa-md">Quantity: </label>
							</div>
							<div class="col-sm-4">
								<input type="number" class="form-control" id="" name="quantity">
							</div>
						</div>
						<div id="container_device">
							<div class="col-sm-2">
								<label class="fa fa-md">PO #: </label>
							</div>
							<div class="col-sm-4">
								<input type="text" class="form-control" id="" name="po_number">
							</div>
							<div class="col-sm-2">
								<label class="fa fa-md">PO Qty: </label>
							</div>
							<div class="col-sm-4">
								<input type="text" class="form-control" id="" name="po_qty" readonly>
							</div>
							<div class="col-sm-2">
								<label class="fa fa-md">Device Name: </label>
							</div>
							<div class="col-sm-4">
								<input type="text" class="form-control" id="" name="device_name" readonly>
							</div>
							<div class="col-sm-2">
								<label class="fa fa-md">Problem: </label>
							</div>
							<div class="col-sm-4">
								<input type="text" class="form-control" id="" name="problem_device">
							</div>
							<div class="col-sm-2">
								<label class="fa fa-md">Parts Affected: </label>
							</div>
							<div class="col-sm-4">
								<input type="text" class="form-control" id="" name="parts_affected_device">
							</div>
							<div class="col-sm-2">
								<label class="fa fa-md">Affected Qty: </label>
							</div>
							<div class="col-sm-4">
								<input type="text" class="form-control" id="" name="affected_qty">
							</div>
							<div class="col-sm-2">
								<label class="fa fa-md">Customer Name: </label>
							</div>
							<div class="col-sm-4">
								<input type="text" class="form-control" id="" name="customer_name">
							</div>
							<div class="col-sm-2">
								<label class="fa fa-md">Shipment Date: </label>
							</div>
							<div class="col-sm-4">
								<input type="date" class="form-control" id="" name="shipment_date">
							</div>
						</div>
						<div class="col-sm-2">
							<label class="fa fa-md">Drawing Number: </label>
						</div>
						<div class="col-sm-4">
							<input type="text" class="form-control" id="" name="drawing_number">
						</div>
					  </div>
					  <div class="row">
						<div class="col-sm-12">
							<div class="col-sm-2">
								<label class="fa fa-md">Other Details: </label>
							</div>
							<div class="col-sm-10">
								<textarea class="form-control" name="other_details"></textarea>
							</div>
							<div class="col-sm-2">
									<label class="fa fa-md">Judged By: </label>
							</div>
							<div class="col-sm-4">
								<select class="form-control" name="judged_by" required>
									<option value=""></option>
									<option value="YEC QC">YEC QC</option>
									<option value="PMI Technical Adviser">PMI Technical Adviser</option>
									<option value="Others">Others, please specify</option>
								</select>
							</div>
							<div id="container_approver_name">
								<div class="col-sm-2">
										<label class="fa fa-md">Select Approver: </label>
								</div>
								<div class="col-sm-4">
								</div>
							</div>
						</div>
					  </div>
					  <div class="row container-fluid" id="container_yec_disposition">
							<div class="col-sm-2">
								<label class="fa fa-md">YEC QC Upload: </label>
							</div>
							<div class="col-sm-4">
								<input type="file" class="form-control" name="file_yec_disposition">
							</div>
					  </div>
					  <div class="row container-fluid" id="container_disposition">
						<div class="col-sm-2">
							<label class="fa fa-md">Judgement Application: </label>
						</div>
						<div class="col-sm-4">
							<select class="form-control" name="judgement_application">
								<option value=""></option>
								<option value="All incoming Parts">All incoming Parts</option>
								<option value="All incoming P.O.">All incoming P.O.</option>
								<option value="Specific Parts Lot no.">Specific Parts Lot no.</option>
								<option value="Specific Parts Lot no.">Specific Product P.O. no.</option>
								<option value="Others">Others, please specify</option>
							</select>
						</div>
					  </div>
					  <div class="row container-fluid" id="container_remarks">
						<div class="col-sm-2">
							<label class="fa fa-md">Notation / Remarks: </label>
						</div>
						<div class="col-sm-10">
							<textarea class="form-control" id="" name="remarks"></textarea>
						</div>
					  </div>
				   </div>
				</div>
			</div>
			
			
		  <div class="modal-footer">
			<!--<button type="button" id="btn_report_ordinates" class="btn btn-primary fa fa-"> Ordinates</button>-->
			<button type="submit" class="btn btn-primary fa fa-save"> Save</button>
			<button type="button" class="btn btn-default fa" data-dismiss="modal"> Close</button>
		  </div>
		</form><!-- /#frm_upload_measdata -->
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" tabindex="-1" role="dialog" id="modal_sa_cancel">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"><span class="fa fa-remove"></span> Cancel Report</h4>
      </div>
      <div class="modal-body">
        <form id="frm_sa_cancel">
			<label class="control-label">Special Acceptance Information</label>
			<label id="label_info"></label>
      </div>
      <div class="modal-footer">
			<button type="submit" class="btn btn-danger"> Cancel Request</button>
			<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		</form>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" tabindex="-1" role="dialog" id="modal_sa_replace_image">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"><span class="fa fa-image"></span> Replace Image</h4>
      </div>
      <div class="modal-body">
        <form id="frm_sa_replace_image">
			<div class="row">
				<div class="col-sm-4">
					Choose Image 
				</div>
				<div class="col-sm-8">
					<input type="file" class="form-control" id="" name="file_sa" accept="image/jpeg, image/png" required>
				</div>
			</div>
      </div>
      <div class="modal-footer">
			<button type="submit" class="btn btn-primary"> Replace</button>
			<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		</form>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" tabindex="-1" role="dialog" id="modal_ng_send_supplier" style="z-index:1051">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"><i class="fa fa-send-o"></i> Send Report Internal</h4>
      </div>
    <form id="frm_send_report_internal">
	  <div class="modal-body">
		<div class="row">            
			<div class="col-sm-12" id="">
                <div class="alert alert-success" role="alert">
                    <b>*Once Send button was clicked, issuance status will be tagged as "WAITING DISPOSITION". System will automatically send an internal email based on the selected recipients.</b>
                </div>
			<div class="col-sm-3" id="">				
                <label class="fa fa-md">To: </label>
			</div>
			<div class="col-sm-9" id="">		
                <select data-placeholder="Select Email Recipients" multiple class="chosen-select" name="ng_send_to" id="cmb_ng_send_to">
                    <option value=''></option>
                </select>
			</div>
			<div class="col-sm-3" id="">				
                <label class="fa fa-md">Cc: </label>
			</div>
			<div class="col-sm-9" id="">				
                <select data-placeholder="Select Email Recipients" multiple class="chosen-select" name="ng_send_cc" id="cmb_ng_send_cc">
                    <option value=''></option>
                </select>
			</div>
			<div class="col-sm-3" id="">				
                <label class="fa fa-md">Attachment: </label>
			</div>
			<div class="col-sm-9" id="">				
                <button type="button" class="btn btn-link fa fa-paperclip" id="btn_ng_send_attachment"> </button>
			</div>
			<div class="col-sm-3" id="">				
                <label class="fa fa-md">Remarks: </label>
			</div>
			<div class="col-sm-9" id="">				
                <textarea class="form-control" id="txt_ng_send_remarks" name="remarks"></textarea>
			</div>
		</div>
	  </div>
	  <div class="modal-footer">
        <button type="submit" class="btn btn-info fa fa-send-o" id="btn_ng_send_internal"> Send</button>
		<button type="button" class="btn btn-default fa fa-close" data-dismiss="modal" id="btn_close"> Close</button>
	  </div>
    </div><!-- /.modal-content -->
    </div>
    </form>
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" tabindex="-1" role="dialog" id="modal_ng_add_disposition" style="z-index:1051">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"><i class="fa fa-plus-circle"></i> Add Disposition</h4>
      </div>
      <form id="frm_ng_add_disposition" method="post" enctype="multipart/form-data">
        <input type="hidden" id="txt_hidden_disposition_type" name="disposition_status">
	    <div class="modal-body">
            <div class="panel panel-default" id="container_ng_sent_details">
                <div class="panel-heading">Sent Details:</div>
                <div class="panel-body">
                    <div class="row">        
                        <div class="col-sm-3">
                            <label class="fa fa-md">Sent By: </label>
                        </div>
                        <div class="col-sm-9">
                            <input type="text" class="form-control" id="txt_ng_sent_by" name="sent_by" disabled>
                        </div>
                    </div>
                    <div class="row">        
                        <div class="col-sm-3">
                            <label class="fa fa-md">Date/Time Sent: </label>
                        </div>
                        <div class="col-sm-9">
                            <input type="text" class="form-control" id="txt_ng_sent_date_time" name="sent_date_time" disabled>
                        </div>
                    </div>
                    <div class="row">        
                        <div class="col-sm-3">
                            <label class="fa fa-md">Remarks: </label>
                        </div>
                        <div class="col-sm-9">
                            <textarea class="form-control" style="width:100%;" rows="3" id="txt_ng_sent_remarks" name="sent_remarks" disabled></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-success" id="container_ng_disposition">
                <div class="panel-heading">Treatment</div>
                <div class="panel-body">
                    <div class="row">        
                        <div class="col-sm-3">
                            <label class="fa fa-md">Disposition: </label>
                        </div>
                        <div class="col-sm-9">
                            <select class="form-control" id="txt_ng_disposition" name="disposition" required>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3">
                            <label class="fa fa-md">Disposition By: </label>
                        </div>
                        <div class="col-sm-9">
                            <input type="text" class="form-control" id="txt_ng_disposition_by" name="disposition_by" required>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3">
                            <label class="fa fa-md">Disposition Date: </label>
                        </div>
                        <div class="col-sm-9">
                            <input type="date" class="form-control" id="txt_ng_disposition_date" max="<?php echo date('Y-m-d',strtotime(date('Y-m-d').' +2years')); ?>" name="disposition_date" required>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3">
                            <label class="fa fa-md">Disposition Time: </label>
                        </div>
                        <div class="col-sm-9">
                            <input type="time" class="form-control" id="txt_ng_disposition_time" name="disposition_time" required>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3">
                            <label class="fa fa-md" id="lbl_ng_reupload_initial_dispo" style="display:none;"><input type="checkbox" id="chk_ng_reupload_initial_dispo"> Re-upload File: </label>
                            <label class="fa fa-md" id="lbl_ng_initial_dispo"> Disposition File: </label>
                        </div>
                        <div class="col-sm-9">
                            <input type="file" class="form-control" id="file_disposition" data="Click to choose file." style="width:100%;display:inline-block;" name="file_disposition" accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" required>
                            <button type="button" class="btn btn-link fa fa-paperclip" id="btn_ng_initial_dispo" style="display:inline-block;"> Download file</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3">
                            <label class="fa fa-md">Remarks: </label>
                        </div>
                        <div class="col-sm-9">
                            <textarea class="form-control" style="width:100%;" rows="3" id="txt_ng_disposition_remarks" name="disposition_remarks"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-primary" id="container_ng_final_reply">
                <div class="panel-heading">Final Reply (Corrective Action)</div>
                <div class="panel-body">
                    <input type="hidden" id="txt_hidden_final_reply_status" name="final_reply_status">
                    <!--<div class="row">        
                        <div class="col-sm-3">
                            <label class="fa fa-md">Disposition: </label>
                        </div>
                        <div class="col-sm-9">
                            <select class="form-control" id="cmb_ng_final_reply" name="final_reply">
                            </select>
                        </div>
                    </div>-->
                    <!--<div class="row">
                        <div class="col-sm-3">
                            <label class="fa fa-md">Disposition By: </label>
                        </div>
                        <div class="col-sm-9">
                            <input type="text" class="form-control" id="cmb_ng_final_reply_by" name="final_reply_by">
                        </div>
                    </div>-->
                    <div class="row">
                        <div class="col-sm-3">
                            <label class="fa fa-md">Reply Date: </label>
                        </div>
                        <div class="col-sm-9">
                            <input type="date" class="form-control" id="txt_ng_final_reply_date" max="<?php echo date('Y-m-d',strtotime(date('Y-m-d').' +2years')); ?>" name="final_reply_date">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3">
                            <label class="fa fa-md">Reply Time: </label>
                        </div>
                        <div class="col-sm-9">
                            <input type="time" class="form-control" id="txt_ng_final_reply_time" name="final_reply_time">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3">
                            <label class="fa fa-md">File: </label>
                        </div>
                        <div class="col-sm-9">
                            <input type="file" class="form-control" id="file_final_reply" style="width:100%;display:inline-block;" name="file_final_reply" accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" required>
                            <button type="button" class="btn btn-link fa fa-paperclip" id="btn_ng_final_dispo" style="display:inline-block;"> Download file</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-3">
                            <label class="fa fa-md">Remarks: </label>
                        </div>
                        <div class="col-sm-9">
                            <textarea class="form-control" style="width:100%;" rows="3" id="cmb_ng_final_reply_remarks" name="final_reply_remarks"></textarea>
                        </div>
                    </div>
                </div>
            </div>
	   </div>
	   <div class="modal-footer">
        <button type="submit" class="btn btn-info fa fa-plus-circle" id="btn_ng_submit_disposition"> Add</button>
		<button type="button" class="btn btn-default fa fa-close" data-dismiss="modal" id="btn_close"> Close</button>
	   </div>
      </form>
    </div><!-- /.modal-content -->    
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" tabindex="-1" role="dialog" id="modal_ng_view_disposition" style="z-index:1051">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"><i class="fa fa-eye"></i> View Disposition</h4>
      </div>
      <form id="">
        <input type="hidden" id="">
	    <div class="modal-body">
            <div class="panel panel-success" id="container_ng_disposition">
                <div class="panel-heading">Treatment</div>
                <div class="panel-body">
                <div class="panel panel-default" id="container_ng_sent_details">
                    <div class="panel-heading">Sent Details:</div>
                    <div class="panel-body">
                        <div class="row">        
                            <div class="col-sm-3">
                                <label class="fa fa-md">Sent By: </label>
                            </div>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="txt_ng_sent_by_view" name="sent_by" disabled>
                            </div>
                        </div>
                        <div class="row">        
                            <div class="col-sm-3">
                                <label class="fa fa-md">Date/Time Sent: </label>
                            </div>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="txt_ng_sent_date_time_view" name="sent_date_time" disabled>
                            </div>
                        </div>
                        <div class="row">        
                            <div class="col-sm-3">
                                <label class="fa fa-md">Remarks: </label>
                            </div>
                            <div class="col-sm-9">
                                <textarea class="form-control" style="width:100%;" rows="3" id="txt_ng_sent_remarks_view" name="sent_remarks" disabled></textarea>
                            </div>
                        </div>
                    </div>
                </div>
                    <div class="row">        
                        <div class="col-sm-3">
                            <label class="fa fa-md">Disposition: </label>
                        </div>
                        <div class="col-sm-9">
                            <select class="form-control" id="txt_ng_disposition_view">
                            </select>
                        </div>
                        <div class="col-sm-3">
                            <label class="fa fa-md">Disposition By: </label>
                        </div>
                        <div class="col-sm-9">
                            <input type="text" class="form-control" id="txt_ng_disposition_by_view">
                        </div>
                        <div class="col-sm-3">
                            <label class="fa fa-md">Disposition Date: </label>
                        </div>
                        <div class="col-sm-9">
                            <input type="date" class="form-control" id="txt_ng_disposition_date_view">
                        </div>
                        <div class="col-sm-3">
                            <label class="fa fa-md">Disposition Time: </label>
                        </div>
                        <div class="col-sm-9">
                            <input type="time" class="form-control" id="txt_ng_disposition_time_view">
                        </div>
                        <div class="row">
							<div class="col-sm-3">
								<label class="fa fa-md" id="lbl_ng_initial_dispo_view"> Disposition File: </label>
							</div>
							<div class="col-sm-9">
								<button type="button" class="btn btn-link fa fa-paperclip" id="btn_ng_initial_dispo_view" style="display:inline-block;"> Download file</button>
							</div>
						</div>
						<div class="col-sm-3">
                            <label class="fa fa-md">Remarks: </label>
                        </div>
                        <div class="col-sm-9">
                            <textarea class="form-control" style="width:100%;" rows="3" id="txt_ng_disposition_remarks_view"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-primary" id="container_ng_final_reply">
                <div class="panel-heading">Final Disposition</div>
                <div class="panel-body">
						<div class="row">        
							<div class="row">
							<div class="col-sm-3">
								<label class="fa fa-md">Reply Date: </label>
							</div>
							<div class="col-sm-9">
								<input type="date" class="form-control" id="txt_ng_final_reply_date_view" max="<?php echo date('Y-m-d',strtotime(date('Y-m-d').' +2years')); ?>" name="final_reply_date">
							</div>
						</div>
						<div class="row">
							<div class="col-sm-3">
								<label class="fa fa-md">Reply Time: </label>
							</div>
							<div class="col-sm-9">
								<input type="time" class="form-control" id="txt_ng_final_reply_time_view" name="final_reply_time">
							</div>
						</div>
						<div class="row">
							<div class="col-sm-3">
								<label class="fa fa-md">File: </label>
							</div>
							<div class="col-sm-9">
								<button type="button" class="btn btn-link fa fa-paperclip" id="btn_ng_final_dispo_view" style="display:inline-block;"> Download file</button>
							</div>
						</div>
                        <div class="col-sm-3">
                            <label class="fa fa-md">Remarks: </label>
                        </div>
                        <div class="col-sm-9">
                            <textarea class="form-control" style="width:100%;" rows="3" id="cmb_ng_final_reply_remarks_view"></textarea>
                        </div>
                    </div>
                </div>
            </div>
	   </div>
	   <div class="modal-footer">
        <button type="submit" class="btn btn-info fa fa-plus-circle" id="btn_ng_submit_disposition_view"> Add</button>
		<button type="button" class="btn btn-default fa fa-close" data-dismiss="modal" id="btn_close"> Close</button>
	   </div>
      </form>
    </div><!-- /.modal-content -->    
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
    
<div class="modal fade" tabindex="-1" role="dialog" id="modal_system_message">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"><i class="fa fa-question-circle-o"></i> System Confirmation</h4>
      </div>
	  <div class="modal-body">
		<div class="row">
			<div class="col-sm-12" id="">				
				<div class="alert alert-success" role="alert" id="container_message">					
				</div>
			</div>
		</div>
	  </div>
	  <div class="modal-footer">
		<button type="button" class="btn btn-default fa fa-close" data-dismiss="modal" id="btn_close"> Close</button>
	  </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" tabindex="-1" role="dialog" id="modal_itn_attention_tag">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title"><i class="fa fa-plus"></i> New Attention Tag</h4>
      </div>
      <div class="modal-body">
        <form id="frm_attention_tag_new" name="frm_attention_tag_new">
			<div class="row">
				<div class="col-sm-6">
					<div class="funkyradio">
						<div class="funkyradio-primary">
							<input type="checkbox" name="category[]" id="checkbox1" value="Material">
							<label for="checkbox1"> Material</label>
						</div>
						<div class="funkyradio-primary">
							<input type="checkbox" name="category[]" id="checkbox3" value="Workmanship">
							<label for="checkbox3"> Workmanship</label>
						</div>
						<div class="funkyradio-primary">
							<input type="checkbox" name="category[]" id="checkbox4" value="Machine">
							<label for="checkbox4"> Machine</label>
						</div>
						<div class="funkyradio-primary">
							<input type="checkbox" name="category[]" id="checkbox5" value="Others">
							<label for="checkbox5"> Others</label>
						</div>
					</div>
				</div>
				<div class="col-sm-6">
					<div class="row">
						<div class="col-sm-4">
							<label class="fa condensed">Control No.</label>
						</div>
						<div class="col-sm-8">
							<input type="text" class="form-control condensed" name="control_no" disabled>
							<!--<span ng-show="frm_attention_tag_new.txt_control_no.$touched && frm_attention_tag_new.txt_control_no.$invalid">The control number is required.</span>-->
						</div>
					</div>
					<div class="row">
						<div class="col-sm-4">
							<label class="fa condensed">Date</label>
						</div>
						<div class="col-sm-8">
							<input type="date" class="form-control condensed" name="date" required>	
						</div>
					</div>
				</div>
			</div>
			<hr class="graph-orange"> 
			<!--<div class="panel panel-primary">
				<div class="panel-heading"><label class="fa fa-lg">Product Information</span></div>
			</div>-->
			<div class="row">
				<div class="col-sm-3">
					<label class="fa condensed">Product</label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control condensed" name="product" required>
				</div>
				<div class="col-sm-2">
					<label class="fa condensed">Lot No.</label>
				</div>
				<div class="col-sm-3">
					<input type="text" class="form-control condensed" name="lot_number" required>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-3">
					<label class="fa condensed">Model</label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control condensed" name="model" required>
				</div>
				<div class="col-sm-2">
					<label class="fa condensed">Quantity</label>
				</div>
				<div class="col-sm-3">
					<input type="number" class="form-control condensed" name="quantity" required>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-3">
					<label class="fa condensed">Parts Code/ P.O. No.</label>
				</div>
				<div class="col-sm-4">
					<input type="text" class="form-control condensed" name="partscode_pono" required>
				</div>
				<div class="col-sm-2">
					<label class="fa condensed">Issued By</label>
				</div>
				<div class="col-sm-3">
					<input type="text" class="form-control condensed" name="issued_by" required>
				</div>
			</div>
			<hr class="graph-blue"> 
			<div class="row">
				<div class="col-sm-12">
					<label class="fa condensed">DESCRIPTION</label>
					<textarea class="form-control" name="description"></textarea>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-12">
					<label class="fa condensed">ANALYSIS</label>
					<textarea class="form-control" name="analysis"></textarea>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-12">
					<label class="fa condensed">DISPOSITION/ RECOMMENDATION</label>
					<textarea class="form-control" name="disposition"></textarea>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-12">
					<label class="fa condensed">CORRECTIVE/ PREVENTIVE ACTION</label>
					<textarea class="form-control" name="corrective_action"></textarea>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-12">
					<label class="fa condensed">REMARKS</label>
					<textarea class="form-control" name="remarks"></textarea>
				</div>
			</div>
	  </div>
      <div class="modal-footer">
			<button type="submit" class="btn btn-primary fa fa-save"> Save</button>
			<button type="button" class="btn btn-default fa fa-remove" data-dismiss="modal"> Close</button>
		</form>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" id="modal_system_notification">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
    
      <div class="modal-body">
     
      <H2>Record has been saved!</H2>
      <h4>New Attention tag has been added!</h4>
     
      </div>
    </div>
  </div>
</div>

<textarea class="form-control"></textarea>


<script>
	/* ***************************
		Menu Functions - Start
	/****************************/
	fn_display_sub_page('container_menu');
	$('#a_menu').click(function(){ fn_display_sub_page('container_menu'); });
	$('#bc_menu').click(function(){ fn_display_sub_page('container_menu'); });
	$('#a_ng').click(function(){ fn_display_sub_page('container_ng'); });
	$('#bc_ng').click(function(){ fn_display_sub_page('container_ng'); });
	$('#a_sa').click(function(){ fn_display_sub_page('container_sa'); });
	$('#bc_sa').click(function(){ fn_display_sub_page('container_sa'); });
	$('#a_ptis').click(function(){ fn_display_sub_page('container_ptis'); });
	$('#bc_ptis').click(function(){ fn_display_sub_page('container_ptis'); });
	$('#a_itn').click(function(){ fn_display_sub_page('container_itn'); });
	$('#bc_itn').click(function(){ fn_display_sub_page('container_itn'); });
	$('#a_ccr').click(function(){ fn_display_sub_page('container_ccr'); });
	$('#bc_ccr').click(function(){ fn_display_sub_page('container_ccr'); });
	$('#a_lcd').click(function(){ fn_display_sub_page('container_lcd'); });
	$('#bc_lcd').click(function(){ fn_display_sub_page('container_lcd'); });
	
	var qfr_category = '';
	
	function fn_display_sub_page(sub_page){
		/* containers */
		$("#qfr div[id*='container_']").hide();
		$('#qfr #container_di').hide();
		/* breadcrumbs */
		$('#qfr ol li').hide();
		var bc_id = sub_page.split('_');
			bc_id = bc_id[bc_id.length-1];
			qfr_category = bc_id;
		if(sub_page == "container_menu"){
			$('#qfr ol #bc_menu').show();
		}else{
			$('#qfr ol #bc_menu').show();
			$('#qfr ol #bc_'+bc_id).show();
		}
		$('#qfr #'+sub_page).toggle(500);
	}
	/* ***************************
		Menu Functions - End
	/****************************/
	
	/* **************************************************
		NG Report - Start
	/***************************************************/
	
	var handler_ts_qfr 		= './handler/handler_ts_qfr.php';
	var username 			= $('#hd_username').val();
	var date_today 			= "<?php echo date('Y-m-d'); ?>";
	var dt_ng_for_filling	= '';
	var dt_ng_records		= '';
	var tbl_ng_for_filling	= 'tbl_ng_for_filling';
	var tbl_ng			    = 'tbl_ng';
	var global_fkqr_ng	    = '';
	var attachment 			= '';
    var ng_approver_status 	= '';
    var ng_approver_username 	= '';
    var ng_approver_name	 	= '';
    var ng_approver_remarks 	= '';
    var ng_approver_date_time 	= '';
    var ng_status 	            = '';
	
	
	// $(window).keydown(function(event){
		// if(event.keyCode == 13) {
		  // event.preventDefault();
		  // return false;
		// }
	// });
	
	dt_ng_for_filling = $('#'+tbl_ng_for_filling).DataTable({
		"aaSorting"	 : [],	
		"sAjaxSource": "server_side_scripts/qr/dt_ng_for_filling.php?un="+username
	});
	
    $('#'+tbl_ng_for_filling+' tbody').on('click', '#btn_edit', function() {
        var tr = $(this).closest('tr');
        $('#frm_upload_ng #invoice_no_ng').val(tr.find('td:eq(3)').text());
        $('#frm_upload_ng #part_code_ng').val(tr.find('td:eq(4)').text());
        $('#frm_upload_ng #part_name_ng').val(tr.find('td:eq(5)').text());
        $('#frm_upload_ng #lot_no_ng').val(tr.find('td:eq(6)').text());
        $('#frm_upload_ng #supplier_ng').val(tr.find('td:eq(7)').text());
        $('#frm_upload_ng #invoice_no_ng').prop('readOnly', true);
        $('#frm_upload_ng #part_name_ng').prop('readOnly', true);
        $('#frm_upload_ng #supplier_ng').prop('readOnly', true);
        $('#frm_upload_ng #part_code_ng').prop('readOnly', true);
        $('#frm_upload_ng #lot_no_ng').prop('readOnly', true);
        $('#container_upload_ng_message').hide();
		fn_load_ng_approver_chosen('tbl_approver_ng',function() {
			fn_ng_get_new_issuance_no(function() {
				$('#issuance_date_ng').val( date_today );
                // fn_get_ng_invoice_num_datalist('','list_invoice_no_ng');
				$('#modal_upload_ng').modal('show');
			});
		});
    });
	
	dt_ng_records = $('#'+tbl_ng).DataTable({
		"aaSorting"	 : [],	
		"sAjaxSource": "server_side_scripts/qr/dt_ng.php?un="+username+"&st="+ng_status,
        "rowCallback"	: function( row, data, index ) {
			if ( data[0] == "FOR APPROVAL") {
				$("td",row).css("background-color","#f0ad4e");
				$("td",row).css("color","#ffffff");
			}
            if ( data[0] == "APPROVED" ) {
				$("td",row).css("background-color","#5bc0de");
				$("td",row).css("color","#ffffff");
			}
			if ( data[0] == "DISAPPROVED" || data[0] == "WITH TREATMENT") {
				$("td",row).css("background-color","#d9534f");
				$("td",row).css("color","#ffffff");
			}
			if ( data[0] == "WITH TREATMENT (OK TO USE)" || data[0] == "WITH TREATMENT (USE AS IS)" || data[0] == "WITH FINAL REPLY") {
				$("td",row).css("background-color","#5cb85c");
				$("td",row).css("color","#ffffff");
			}
		}
	});
	
    $('#btn_ng_load_for_approval').click(function() {
        dt_ng_records.ajax.url("server_side_scripts/qr/dt_ng.php?un="+username+"&st=FOR APPROVAL").load();
    });
    
    $('#btn_ng_load_approved').click(function() {
        dt_ng_records.ajax.url("server_side_scripts/qr/dt_ng.php?un="+username+"&st=APPROVED").load();
    });
    
    $('#btn_ng_load_disapproved').click(function() {
        dt_ng_records.ajax.url("server_side_scripts/qr/dt_ng.php?un="+username+"&st=DISAPPROVED").load();
    });
    
    $('#btn_ng_load_no_final_reply').click(function() {
        dt_ng_records.ajax.url("server_side_scripts/qr/dt_ng.php?un="+username+"&st=WITH TREATMENT ").load();
    });
    
    $('#btn_ng_load_with_treatment').click(function() {
        dt_ng_records.ajax.url("server_side_scripts/qr/dt_ng.php?un="+username+"&st=WITHOUT FINAL REPLY ").load();
    });
    
	$('#btn_upload_ng').click(function(){        
        $('#frm_upload_ng #invoice_no_ng').prop('readOnly', false);
        $('#frm_upload_ng #part_name_ng').prop('readOnly', false);
        $('#frm_upload_ng #supplier_ng').prop('readOnly', false);
        $('#frm_upload_ng #part_code_ng').prop('readOnly', false);
        $('#frm_upload_ng #lot_no_ng').prop('readOnly', false);
		$('#container_upload_ng_message').hide();
		fn_load_ng_approver_chosen('tbl_approver_ng',function() {
			fn_ng_get_new_issuance_no(function() {
				$('#issuance_date_ng').val( date_today );alert('new');
                fn_get_ng_invoice_num_datalist('','list_invoice_no_ng');
				$('#modal_upload_ng').modal('show');
			});
		});
	});
    
	$('#invoice_no_ng').change(function(e) {
        if($(this).val() != '' || e.keyCode == 13) {
            fn_get_partcode_datalist_by_invoice_num($(this).val(), 'frm_upload_ng #list_part_code');
        } 
    });
	
    $('#part_code_ng').change(function() {
        if($(this).val() != '') {
            fn_get_partname_by_partcode($(this).val(), 'part_name_ng');
        }
    });
	
	$('#frm_upload_ng').on('submit', function(e) {
		e.preventDefault();
		var serialized_data = new FormData(this);
		if(fn_ng_validate_approvers('tbl_approver_ng', 'container_upload_ng_message')){
            $('.btn').prop("disabled",true);
			var approvers = [];
				$('#tbl_approver_ng tbody tr').each(function() {
					approvers.push($(this).find('td:eq(1) option:selected').val());
				});
//			console.log(approvers);
			serialized_data.append("action","ng_upload_report");
			serialized_data.append("category_code",qfr_category);
			serialized_data.append("username",username);
			serialized_data.append("approvers",approvers);
				
			call_ajax_attachment(serialized_data, handler_ts_qfr, function(result){
				$('#modal_upload_ng').modal('hide');
				$('#modal_system_message').modal();
				$('#container_message').html( '<h4>'+result['msg']+'</h4>' );
				dt_ng_records.ajax.reload();
				dt_ng_for_filling.ajax.reload();
                $('.btn').prop("disabled",false);
			});
		} 
	});
	
	$('#' + tbl_ng + ' tbody').on('click', ' tr', function() {
		$('#'+tbl_ng+' tbody tr').attr('style','');
		$(this).attr('style','background:teal;color:white;');
	});
    
	$('#'+tbl_ng+' tbody').on('click', '#btn_edit', function() {
		global_fkqr_ng = $(this).val();
		fn_display_ng_details('lbl_ng_status_edit','issuance_no_ng_edit','issuance_date_ng_edit','supplier_ng_edit','invoice_no_ng_edit','part_code_ng_edit','part_name_ng_edit','lot_no_ng_edit','drawing_number_ng_edit','remarks_ng_edit','btn_attachment_ng_edit','tbl_approver_ng_edit',function() {
            if($('#lbl_ng_status_edit').text() == 'APPROVED') {
                $('#btn_ng_send_supplier').show();
                $('#btn_ng_add_disposition').hide();
                $('#chk_reupload').attr('disabled', false);
            } else if($('#lbl_ng_status_edit').text() == 'WAITING DISPOSITION') {
                $('#btn_ng_report_edit').hide();
                $('#btn_ng_send_supplier').hide();
                $('#btn_ng_add_disposition').show();
                $('#chk_reupload').attr('disabled', true);
            } else if($('#lbl_ng_status_edit').text() == 'WITH TREATMENT') {
                $('#btn_ng_report_edit').hide();
                $('#btn_ng_add_disposition').attr('class','btn btn-success fa fa-plus-circle');
                $('#btn_ng_add_disposition').text(' Add Disposition');
                $('#btn_ng_add_disposition').show();
                $('#btn_ng_send_supplier').hide();
                $('#chk_reupload').attr('disabled', true);
            } else if($('#lbl_ng_status_edit').text() == 'WITH TREATMENT (OK TO USE)' || $('#lbl_ng_status_edit').text() == 'WITH TREATMENT (USE AS IS)') {
                $('#btn_ng_report_edit').hide();
                $('#btn_ng_add_disposition').attr('class','btn btn-success fa fa-eye');
                $('#btn_ng_add_disposition').text(' View Disposition');
                $('#btn_ng_add_disposition').show();
                $('#btn_ng_send_supplier').hide();
                $('#chk_reupload').attr('disabled', true);
            } else if($('#lbl_ng_status_edit').text() == 'WITH FINAL REPLY') {
                $('#btn_ng_report_edit').hide();
                $('#btn_ng_add_disposition').attr('class','btn btn-success fa fa-eye');
                $('#btn_ng_add_disposition').text(' View Disposition');
                $('#btn_ng_add_disposition').show();
                $('#btn_ng_send_supplier').hide();
                $('#chk_reupload').attr('disabled', true);
            } else {
                $('#btn_ng_report_edit').hide();
                $('#btn_ng_send_supplier').hide();
                $('#btn_ng_add_disposition').hide();
                $('#chk_reupload').attr('disabled', false);
            }
            
			$('#file_ng_edit').hide();
            $('#file_ng_edit').attr('required', false);
			$('#chk_reupload').attr('checked', false);
			$('#modal_upload_ng_edit').modal();
		});
	});
	
	$('#chk_reupload').click(function() {		
		if($(this).is(':checked')) {
			attachment = $('#btn_attachment_ng_edit').text();
			$('#file_ng_edit').show();
			$('#file_ng_edit').attr('required', true);
			$('#btn_attachment_ng_edit').text(' ');
			if($('#lbl_ng_status_edit').text() == 'FOR APPROVAL') {
				$('#container_upload_ng_message_edit').html('<h4>Re-uploading of file will reset the approval history (from approved to pending). Uncheck the checkbox if you want to cancel the action.</h4>');
			} else {
				$('#container_upload_ng_message_edit').html('<h4>Re-uploading of file will increment the revision number of Issuance No. and will reset the approval process.</h4>');
			}
			$('#container_upload_ng_message_edit').show();
			$('#btn_ng_report_edit').show();
            fn_ng_reset_approver_table('tbl_approver_ng_edit');
		} else {
			$('#file_ng_edit').hide();
			$('#file_ng_edit').attr('required', false);
			$('#btn_attachment_ng_edit').text(' '+attachment);
			$('#container_upload_ng_message_edit').hide();
			$('#btn_ng_report_edit').hide();
            fn_ng_reload_approver_table();
		}
	});
	
	$('#btn_attachment_ng_edit').click(function() {
		window.location.href = "./pages/qfr/dl_ng_report.php?id="+$(this).val();
	});
	
	$('#btn_attachment_ng_view').click(function() {
		window.location.href = "./pages/qfr/dl_ng_report.php?id="+$(this).val();
	});
		
	$('#frm_upload_ng_update').on('submit', function(e) {
		e.preventDefault();
        $('.btn').prop("disabled",true);
		var current_status = $('#lbl_ng_status_edit').text();
        var serialized_data = new FormData(this);
        
		if(current_status == 'FOR APPROVAL') {
			var handler_action = "ng_update_report_info";
//		} else if(current_status == 'APPROVED') { //will increment the rev number
		} else { //will increment the rev number
			var handler_action = "ng_upload_report";
            var issuance = ($('#issuance_no_ng_edit').val()).split(' Rev. ');
            serialized_data.append("issuance_no_ng",issuance[0]);
            serialized_data.append("rev_no",issuance[1]);
		}
//        else {
//			var handler_action = "";
//		}
		if(fn_ng_validate_approvers('tbl_approver_ng_edit', 'container_upload_ng_message_edit')){
			var approvers   = [];
			var app_order   = [];
			var app_status  = [];
			var app_remarks = [];
			var app_logs    = [];
			$('#tbl_approver_ng_edit tbody tr').each(function() {
				app_order.push((($(this).find('td:eq(0)').text()).replace(/\s/g,'')).charAt(0));
				app_status.push(($(this).find('td:eq(1)').text()).replace(/\s/g,''));
				approvers.push($(this).find('td:eq(2) option:selected').val());
				app_remarks.push($(this).find('td:eq(3) option:selected').val());
				app_logs.push($(this).find('td:eq(4) option:selected').val());
			});
			serialized_data.append("action",handler_action);
			serialized_data.append("pkid",global_fkqr_ng);
			serialized_data.append("category_code",qfr_category);
			serialized_data.append("username",username);
			serialized_data.append("approvers",approvers);
			serialized_data.append("app_order",app_order);
			serialized_data.append("app_status",app_status);
			serialized_data.append("app_remarks",app_remarks);
			serialized_data.append("app_logs",app_logs);
			serialized_data.append("current_status",current_status);
				
			call_ajax_attachment(serialized_data, handler_ts_qfr, function(result){
				$('#modal_upload_ng_edit').modal('hide');
				$('#modal_system_message').modal();
				$('#container_message').html( '<h4>'+result['msg']+'</h4>' );
				dt_ng_records.ajax.reload();
				dt_ng_for_filling.ajax.reload();
                $('.btn').prop("disabled",false);
			});
		} 
	});
		
	$('#'+tbl_ng+' tbody').on('click', '#btn_view', function() {
		global_fkqr_ng = $(this).val();
        fn_display_ng_details('lbl_ng_status_view','issuance_no_ng_view','issuance_date_ng_view','supplier_ng_view','invoice_no_ng_view','part_code_ng_view','part_name_ng_view','lot_no_ng_view','drawing_number_ng_view','remarks_ng_view','btn_attachment_ng_view','tbl_approver_ng_view',function() {
			$('#file_ng_view').hide();
			$('#file_ng_view').attr('required', false);
			$('#chk_reupload').attr('checked', false);
            
            if($('#lbl_ng_status_view').text() == 'WITH TREATMENT' || $('#lbl_ng_status_view').text() == 'WITH FINAL REPLY') {
                $('#btn_ng_submit_disposition').hide();
                $('#btn_ng_view_disposition').show();
            } else {
                $('#btn_ng_view_disposition').hide();
            }
			fn_ng_validate_approver(function () {
				$('#modal_approver_ng_view').modal();
			});
		});
	});
		
	$('#btn_ng_approve').click(function() {
		$('#container_approver_message').attr('class','alert alert-success');
		$('#container_approver_message').html('Are you sure you want to approve the request?<br><br>Remarks:<textarea name="remarks" style="width:100%;" rows="4"></textarea>');
		$('#modal_approver_message').modal();
	});
		
	$('#btn_ng_disapprove').click(function() {
		$('#container_approver_message').attr('class','alert alert-danger');
		$('#container_approver_message').html('Are you sure you want to approve the request?<br><br>Remarks:<textarea name="remarks" style="width:100%;" rows="4" required></textarea>');
		$('#modal_approver_message').modal();
	});
	
	$('#frm_ng_approvers_decision').on('submit', function(e) {
		e.preventDefault();
        $('.btn').prop("disabled",true);
		var decision = $('#container_approver_message').attr('class');
		if(decision == 'alert alert-success') {
			var status = 'APPROVED';
		} else if(decision == 'alert alert-danger') {
			var status = 'DISAPPROVED';
		} 
		var serialized_data = new FormData(this);
			serialized_data.append("action","ng_approver_decision");
			serialized_data.append("fkqr",global_fkqr_ng);
			serialized_data.append("status",status);
			serialized_data.append("username",username);
				
			call_ajax_attachment(serialized_data, handler_ts_qfr, function(result){
				$('#modal_approver_message').modal('hide');
				$('#modal_approver_ng_view').modal('hide');
				$('#modal_system_message').modal();
				$('#container_message').html( '<h4>'+result['msg']+'</h4>' );
				dt_ng_records.ajax.reload();
				dt_ng_for_filling.ajax.reload();
                $('.btn').prop("disabled",false);
			});
	});
	
    $('#btn_ng_send_supplier').click(function() {
        $('#btn_ng_send_attachment').text(' '+ $('#btn_attachment_ng_edit').text());
        $('#btn_ng_send_attachment').val(' '+ $('#btn_attachment_ng_edit').val());
        fn_ng_get_recipients_list('cmb_ng_send_to', function() {
            $('.chosen-select#cmb_ng_send_to').chosen({width:"100%", height: "100%"});
        });
        fn_ng_get_recipients_list('cmb_ng_send_cc', function() {
            $('.chosen-select#cmb_ng_send_cc').chosen({width:"100%", height: "100%"});
            fn_ng_load_email_recipients('cmb_ng_send_to','cmb_ng_send_cc',function() {
               $('#modal_upload_ng_edit').modal('hide');
               $('#modal_ng_send_supplier').modal(); 
            });   
        });                 
    });
    	
	$('#btn_ng_send_attachment').click(function() {
		window.location.href = "./pages/qfr/dl_ng_report.php?id="+$(this).val();
	});
    
    $('#frm_send_report_internal').on('submit', function(e) {
       e.preventDefault();
       $('.btn').prop("disabled",true);
       var serialized_data = $(this).serialize();
       var data = {
            "action" 		: "ng_send_for_disposition",
            "pkid"		    : global_fkqr_ng,
            "send_to"		: JSON.stringify($('#cmb_ng_send_to').val()),
            "send_cc"		: JSON.stringify($('#cmb_ng_send_cc').val()),
            "username"		: username
        } 
        call_ajax_serialize(data, serialized_data, handler_ts_qfr, function(result){
            $('#modal_system_message').modal();	
            $('#modal_ng_send_supplier').modal('hide');
            $('#container_message').html( '<h4>'+result['msg']+'</h4>' );
            dt_ng_records.ajax.reload();
			dt_ng_for_filling.ajax.reload();
            $('.btn').prop("disabled",false);
        });
    });
    
    $('#btn_ng_add_disposition').click(function() {
        fn_get_disposition_list('txt_ng_disposition', function() {
          fn_ng_return_disposition_details_by_fkqr('txt_ng_sent_by','txt_ng_sent_date_time','txt_ng_sent_remarks','txt_ng_disposition', 'txt_ng_disposition_by', 'txt_ng_disposition_date', 'txt_ng_disposition_time', 'txt_ng_disposition_remarks', 'file_disposition', 'lbl_ng_reupload_initial_dispo','lbl_ng_initial_dispo', 'btn_ng_initial_dispo', 'cmb_ng_final_reply', 'cmb_ng_final_reply_by', 'txt_ng_final_reply_date', 'txt_ng_final_reply_time', 'cmb_ng_final_reply_remarks', 'file_final_reply', 'container_ng_disposition', 'container_ng_final_reply', 'btn_ng_final_dispo','btn_ng_submit_disposition', 'txt_hidden_disposition_type', 'modal_ng_add_disposition', function() {                    
              $('#modal_ng_add_disposition').modal();
          });  
        });
        
    });
    
    $('#btn_ng_view_disposition').click(function() {
        fn_get_disposition_list('txt_ng_disposition_view', function() {
          fn_ng_return_disposition_details_by_fkqr('txt_ng_sent_by_view','txt_ng_sent_date_time_view','txt_ng_sent_remarks_view','txt_ng_disposition_view', 'txt_ng_disposition_by_view', 'txt_ng_disposition_date_view', 'txt_ng_disposition_time_view','txt_ng_disposition_remarks_view', 'file_disposition_view', '','','btn_ng_initial_dispo_view','cmb_ng_final_reply_view', 'cmb_ng_final_reply_by_view', 'txt_ng_final_reply_date_view', 'txt_ng_final_reply_time_view', 'cmb_ng_final_reply_remarks_view', 'file_final_reply_view', 'container_ng_disposition_view', 'container_ng_final_reply_view', 'btn_ng_final_dispo_view','btn_ng_submit_disposition_view', 'txt_hidden_disposition_type_view', 'modal_ng_view_disposition', function() {                    
                $('#modal_ng_view_disposition').modal();
          });         
        });
        
    });
    
    $('#frm_ng_add_disposition').on('submit', function(e) {
        e.preventDefault();
        $('.btn').prop("disabled",true);
        $('#txt_ng_disposition').prop('disabled', false);
        var serialized_data = new FormData(this);
            serialized_data.append("action","ng_add_disposition");
			serialized_data.append("fkqr",global_fkqr_ng);
			serialized_data.append("category_code",qfr_category);
			serialized_data.append("username",username);
				
			call_ajax_attachment(serialized_data, handler_ts_qfr, function(result){
				$('#modal_ng_add_disposition').modal('hide');
				$('#modal_upload_ng_edit').modal('hide');
				$('#modal_system_message').modal();
				$('#container_message').html( '<h4>'+result['msg']+'</h4>' );
				dt_ng_records.ajax.reload();
				dt_ng_for_filling.ajax.reload();
                $('.btn').prop("disabled",false);
			});
    });
    
    $('#frm_ng_add_disposition #chk_ng_reupload_initial_dispo').click(function() {
        if($(this).is(':checked')) {
			$('#file_disposition').prop('disabled', false);
		} else {
			$('#file_disposition').prop('disabled', true);
		}
    });
    
    $('#frm_ng_add_disposition #btn_ng_initial_dispo').click(function() {
        window.location.href = "./pages/qfr/dl_ng_disposition_report.php?id="+$(this).val()+'_1';
    });
    
    $('#frm_ng_add_disposition #btn_ng_final_dispo').click(function() {
        window.location.href = "./pages/qfr/dl_ng_disposition_report.php?id="+$(this).val()+'_2';
    });
    
    $('#txt_ng_disposition').change(function() {
        if($(this).val() == 'OK TO USE' || $(this).val() == 'USE AS IS') {
            $('#txt_hidden_final_reply_status').val('N/A');
        } else {
            $('#txt_hidden_final_reply_status').val('REQUIRED');   
        }
        $('#btn_ng_final_dispo').hide();
    });
    
	$('#btn_report_ng').click(function() {
		fn_return_fiscal_year('cmb_ng_fy_start');
		fn_return_fiscal_year('cmb_ng_fy_end');
		$('.chosen-select#cmb_ng_section').chosen({width:"100%", height: "100%"});
		fn_get_supplier_list('cmb_ng_supplier');
		$('#modal_ng_report').modal();
	});
	
	$('#frm_export_ng_report').on('submit', function(e) {
		e.preventDefault();
		var report_type = $('#cmb_ng_report_type').val();
		var ng_fy_start = $('#cmb_ng_fy_start').val();
		var ng_fy_end 	= $('#cmb_ng_fy_end').val();
		var ng_supplier	= $('#cmb_ng_supplier').val();
		var ng_section 	= $('#cmb_ng_section').val();
		if(report_type == 'dispo_summary') {
			window.location.href = './reports/excel_ng_report_disposition.php?rt='+report_type+'&fs='+ng_fy_start+'&fe='+ng_fy_end+'&sp='+ng_supplier+'&sc='+ng_section;
		} else if(report_type == 'dispo_leadtime_first') {
			window.location.href = './reports/excel_ng_report_disposition_first.php?rt='+report_type+'&fs='+ng_fy_start+'&fe='+ng_fy_end+'&sp='+ng_supplier+'&sc='+ng_section;
		} else if(report_type == 'dispo_leadtime_final') {
			window.location.href = './reports/excel_ng_report_disposition_final.php?rt='+report_type+'&fs='+ng_fy_start+'&fe='+ng_fy_end+'&sp='+ng_supplier+'&sc='+ng_section;
		}  
	});
		
	function fn_ng_get_new_issuance_no(callback) {
		var data = {
			"action" 		: "ng_get_new_issuance_no"
		} 
		call_ajax(data, handler_ts_qfr, function(result){
			$('#issuance_no_ng').val( result['issuance_no'] );
			callback();
		});
	}
	
	function fn_get_disposition_list(cmb_id, callback) {
		$('#'+cmb_id).empty();
		var data = {
			"action" 		: "get_disposition_list"
		} 
		call_ajax(data, handler_ts_qfr, function(result){
			$('#'+cmb_id).append( '<option value="">-</option>' );
			$('#'+cmb_id).append( result['html_select'] );
            callback();
		});
	}
    
	function fn_display_part_name(part_code,part_name_id) {
		$('#'+cmb_id).empty();
		var data = {
			"action" 		: "get_partcode_datalist_by_invoice_num",
			"invoice_num"	: invoice_num
		} 
		call_ajax(data, handler_ts_qfr, function(result){
			$('#'+cmb_id).append( '<option value="">-</option>' );
			$('#'+cmb_id).append( result['html_select'] );
		});
	}
    
    function fn_get_partcode_datalist_by_invoice_num(invoice_num, cmb_id) {
		$('#'+cmb_id).empty();
		var data = {
			"action" 		: "get_partcode_datalist_by_invoice_num",
			"invoice_num"	: invoice_num
		} 
		call_ajax(data, handler_ts_qfr, function(result){
			$('#'+cmb_id).append( '<option value="">-</option>' );
			$('#'+cmb_id).append( result['html_select'] );
		});
	}
	
	function fn_get_report_approvers(cmb_id, callback) {
		$('#'+cmb_id).empty();
		var data = {
			"action" 		: "get_report_approvers"
		} 
		call_ajax(data, handler_ts_qfr, function(result){
			$('#'+cmb_id).append( '<option>-</option>' );
			$('#'+cmb_id).append( result['html_select'] );
			$('#'+cmb_id).trigger("chosen:updated");
			callback();
		});
	}
	
	function fn_ng_validate_approvers(tbl_id, container_msg) {
		var no_input = '';
		var exist = '';
        var current_data = [];
        if(tbl_id == 'tbl_approver_ng') {
            $('#tbl_approver_ng tbody tr').each(function() {
                if($(this).find('td:eq(1) option:selected').html() == '-') {
                    no_input += ' - '+$(this).find('td:eq(0)').text()+'<br>';
                } else {
                    if ( $.inArray($(this).find('td:eq(1) option:selected').html(), current_data) > -1 ) {
                        exist += ' - '+$(this).find('td:eq(1) option:selected').html() + '<br>';
                    } else {       
						if(typeof($(this).find('td:eq(1) option:selected').html()) != 'undefined') {
							current_data.push($(this).find('td:eq(1) option:selected').html());
						}
                    }
                }
            });
        } else if(tbl_id == 'tbl_approver_ng_edit') {
            $('#tbl_approver_ng_edit tbody tr').each(function() {
                if($(this).find('td:eq(2) option:selected').html() == '-') {
                    no_input += ' - '+$(this).find('td:eq(0)').text()+'<br>';
                } else {
                    if ( $.inArray($(this).find('td:eq(2) option:selected').html(), current_data) > -1 ) {
                        exist += ' - '+$(this).find('td:eq(2) option:selected').html() + '<br>';
                    } else {    
						if(typeof($(this).find('td:eq(2) option:selected').html()) != 'undefined') {
							current_data.push($(this).find('td:eq(2) option:selected').html());
						}
                    }
                }
            });
        }
		if(no_input != '' || exist != '') {
            if(no_input != '') {                
                $('#'+container_msg).html('Please select data on: <br> '+no_input);
                $('#'+container_msg).show();
                $('.btn').prop("disabled",false);
                return false;
            }
            if(exist != '') {                
                $('#'+container_msg).html('Please remove the duplicate name of: <br> '+exist);
                $('#'+container_msg).show();
                $('.btn').prop("disabled",false);
                return false;
            }
		} else {
			$('#'+container_msg).hide();
			return true;
		}
	}
	
	function fn_display_ng_details(lbl_ng_status,issuance_no_ng,issuance_date_ng,supplier_ng,invoice_no_ng,part_code_ng,part_name_ng,lot_no_ng,drawing_number_ng,remarks_ng,btn_attachment_ng,tbl_approver_ng,callback) {
        var data = {
			"action" 		: "ng_display_details_by_pkid",
			"pkid" 			: global_fkqr_ng
		} 
		call_ajax(data, handler_ts_qfr, function(result){
			$('#'+lbl_ng_status).html(result['status_main']);
			$('#'+lbl_ng_status).attr('class', result['status_class']);
			$('#'+issuance_no_ng).val(result['issuance_no']);
			$('#'+issuance_date_ng).val(result['issuance_date']);
			$('#'+supplier_ng).val(result['supplier']);
			$('#'+invoice_no_ng).val(result['invoice_no']);
			$('#'+part_code_ng).val(result['part_code']);
			$('#'+part_name_ng).val(result['part_name']);
			$('#'+lot_no_ng).val(result['lot_no']);
			$('#'+drawing_number_ng).val(result['drawing_number']);
			$('#'+remarks_ng).val(result['remarks']);
			$('#'+btn_attachment_ng).text(' '+result['file_name']);
			$('#'+btn_attachment_ng).val(global_fkqr_ng);
			
            ng_approver_status 	    = result['status'];
            ng_approver_username 	= result['username'];
            ng_approver_name	 	= result['app_name'];
            ng_approver_remarks 	= result['app_remarks'];
            ng_approver_date_time 	= result['date_time'];
            
			fn_load_ng_approver_chosen(tbl_approver_ng,function() {
				setTimeout(function () {
					var ctr = 0;
					if(tbl_approver_ng == 'tbl_approver_ng_edit') {
						$('#tbl_approver_ng_edit tbody tr').each(function() {
							var cmb_id = ($(this).find('td:eq(2) .chosen-select').attr('id'));
							if(ng_approver_status[ctr] == 'PENDING' || ng_approver_status[ctr] == '-') {
								var disabled = false;
							} else {
								var disabled = true;
							}
							$(this).find('td:eq(1)').html('<center>'+ng_approver_status[ctr]+'</center>');
							$(this).find('td:eq(2) #'+cmb_id).val(ng_approver_username[ctr]).trigger('chosen:updated');
							$(this).find('td:eq(2) #'+cmb_id).prop('disabled',disabled).trigger("chosen:updated");
							$(this).find('td:eq(3) textarea').val(ng_approver_remarks[ctr]);
							$(this).find('td:eq(4)').text(ng_approver_date_time[ctr]);
							ctr++;
						});
					}
					if(tbl_approver_ng == 'tbl_approver_ng_view') {
						$('#tbl_approver_ng_view tbody tr').each(function() {
							var cmb_id = ($(this).find('td:eq(2) .chosen-select').attr('id'));
							if(ng_approver_status[ctr] == 'PENDING' || ng_approver_status[ctr] == '-') {
								var disabled = false;
							} else {
								var disabled = true;
							}
							$(this).find('td:eq(1)').html('<center>'+ng_approver_status[ctr]+'</center>');
							$(this).find('td:eq(2)').html(ng_approver_name[ctr]);
							$(this).find('td:eq(3) textarea').val(ng_approver_remarks[ctr]);
							$(this).find('td:eq(4)').text(ng_approver_date_time[ctr]);
							ctr++;
						});
					}
				},1000);
			});
			callback();
		});
	}
	
	function return_approver_order(num) {
		switch (num % 10) {
			case 1:  return num+'st';
			case 2:  return num+'nd';
			case 3:  return num+'rd';
		}
		return num+'th';  
	}
	
	function fn_load_ng_approver_chosen(tbl_id, callback) {
		$('#'+tbl_id+' tbody').empty();
		var tbl_body = '';
		var row = 1;
		if(tbl_id == 'tbl_approver_ng') {
			for(var i=0;i<3;i++) {
				setTimeout(function () {
					var order = return_approver_order(row);
					var cmb_id = 'cmb_'+order+'_approver_ng';
						tbl_body  = '<tr>';
						tbl_body += '	<td>';
						tbl_body += '		<center>'+order+' Approver</center>';
						tbl_body += '	</td>';
						tbl_body += '	<td>';
						tbl_body += '		<select data-placeholder="Select Approver" class="chosen-select" name="" id="'+cmb_id+'">';
						tbl_body += '		</select>';
						tbl_body += '	</td>';
						tbl_body += '</tr>';	
					$('#'+tbl_id+' tbody').append(tbl_body);
					fn_get_report_approvers(cmb_id,function() {
						$('.chosen-select#'+cmb_id).chosen({width:"100%", height: "100%"});
					});
					row++;				
				}, 1000);
				if(i == 2) {
					callback();
				}
			}		
		} 
		else if(tbl_id == 'tbl_approver_ng_edit') {
			for(var i=0;i<3;i++) {
				setTimeout(function () {
                    if(row == 1){
                        var stat = 'PENDING';
                    } else {
                      var stat = '';  
                    }
					var order = return_approver_order(row);
					var cmb_id = 'cmb_'+order+'_approver_ng';
						tbl_body  = '<tr>';
						tbl_body += '	<td>';
						tbl_body += '		<center>'+order+' Approver</center>';
						tbl_body += '	</td>';
						tbl_body += '	<td>';
						tbl_body += '		<center>'+stat+'</center>';
						tbl_body += '	</td>';
						tbl_body += '	<td>';
						tbl_body += '		<select data-placeholder="Select Approver" class="chosen-select" name="" id="'+cmb_id+'">';
						tbl_body += '		</select>';
						tbl_body += '	</td>';
						tbl_body += '	<td>';
						tbl_body += '		<center><textarea style="width:100%;" rows="2" disabled></textarea></center>';
						tbl_body += '	</td>';
						tbl_body += '	<td>';
						tbl_body += '		<center></center>';
						tbl_body += '	</td>';
						tbl_body += '</tr>'; 
					$('#'+tbl_id+' tbody').append(tbl_body);
					fn_get_report_approvers(cmb_id,function() {
						$('.chosen-select#'+cmb_id).chosen({width:"100%", height: "100%"});
					});
					row++;				
				}, 100);
				if(i == 2) {
					callback();
				}
			}	
		} else if(tbl_id == 'tbl_approver_ng_view') {
			for(var i=0;i<3;i++) {
				setTimeout(function () {
					var order = return_approver_order(row);
					var cmb_id = 'cmb_'+order+'_approver_ng';
						tbl_body  = '<tr>';
						tbl_body += '	<td>';
						tbl_body += '		<center>'+order+' Approver</center>';
						tbl_body += '	</td>';
						tbl_body += '	<td>';
						tbl_body += '		<center></center>';
						tbl_body += '	</td>';
						tbl_body += '	<td>';
						tbl_body += '		<center></center>';
						tbl_body += '	</td>';
						tbl_body += '	<td>';
						tbl_body += '		<center><textarea style="width:100%;" rows="2" disabled></textarea></center>';
						tbl_body += '	</td>';
						tbl_body += '	<td>';
						tbl_body += '		<center></center>';
						tbl_body += '	</td>';
						tbl_body += '</tr>'; 
					$('#'+tbl_id+' tbody').append(tbl_body);
					row++;				
				}, 100);
				if(i == 2) {
					callback();
				}
			}	
		}
	}
	
	function fn_ng_validate_approver(callback) {
		var data = {
			"action" 		: "ng_validate_approver",
			"pkid"			: global_fkqr_ng,
			"username"		: username
		} 
		call_ajax(data, handler_ts_qfr, function(result){
			if(result['is_approver'] == "YES") {
				$('#btn_ng_approve').show();
				$('#btn_ng_disapprove').show();
			} else {
				$('#btn_ng_approve').hide();
				$('#btn_ng_disapprove').hide();
			}
			callback();
		});
	}
	
	function fn_ng_reset_approver_table(tbl_id) {
        fn_load_ng_approver_chosen('tbl_approver_ng_edit',function() {            
        });
	}
    
    function fn_ng_reload_approver_table() {
        var ctr = 0;
        $('#tbl_approver_ng_edit tbody tr').each(function() {
            var cmb_id = ($(this).find('td:eq(2) .chosen-select').attr('id'));
            if(ng_approver_status[ctr] == 'PENDING' || ng_approver_status[ctr] == '-') {
                var disabled = false;
            } else {
                var disabled = true;
            }
            $(this).find('td:eq(1)').html('<center>'+ng_approver_status[ctr]+'</center>');
            $(this).find('td:eq(2) #'+cmb_id).val(ng_approver_username[ctr]).trigger('chosen:updated');
            $(this).find('td:eq(2) #'+cmb_id).prop('disabled',disabled).trigger("chosen:updated");
            $(this).find('td:eq(3) textarea').val(ng_approver_remarks[ctr]);
            $(this).find('td:eq(4)').text(ng_approver_date_time[ctr]);
            ctr++;
        });
    }
	
    function fn_ng_get_recipients_list(cmb_id, callback) {
        $('#'+cmb_id).empty();
        var data = {
			"action" 		: "get_email_recipients_list"
		} 
		call_ajax(data, handler_ts_qfr, function(result){
			$('#'+cmb_id).append( '<option>-</option>' );
			$('#'+cmb_id).append( result['html_select'] );
            callback();
		});
    }
    
    function fn_ng_load_email_recipients(txt_to_id, txt_cc_id, callback) {
        var data = {
			"action" 		: "get_email_recipients_by_category",
			"qfr_category"	: qfr_category
		} 
		call_ajax(data, handler_ts_qfr, function(result){
            var to_recipients = result['to'];
            $.each(to_recipients.split(','), function(index, element)
            {
               $('#'+txt_to_id).find('option[value="'+ element +'"]').attr('Selected', 'Selected');
               $("#"+txt_to_id).trigger('chosen:updated');   
            });
            var cc_recipients = result['cc'];
            $.each(cc_recipients.split(','), function(index, element)
            {
               $('#'+txt_cc_id).find('option[value="'+ element +'"]').attr('Selected', 'Selected');
               $("#"+txt_cc_id).trigger('chosen:updated');   
            });
			callback();
		});
    }
    
    function fn_ng_return_disposition_details_by_fkqr(txt_ng_sent_by, txt_ng_sent_date_time, txt_ng_sent_remarks, txt_ng_disposition, txt_ng_disposition_by, txt_ng_disposition_date, txt_ng_disposition_time, txt_ng_disposition_remarks, file_disposition,lbl_ng_reupload_initial_dispo, lbl_ng_initial_dispo, btn_ng_initial_dispo, cmb_ng_final_reply, cmb_ng_final_reply_by, txt_ng_final_reply_date, txt_ng_final_reply_time, cmb_ng_final_reply_remarks, file_final_reply, container_ng_disposition, container_ng_final_reply, btn_ng_final_dispo, btn_ng_submit_disposition, txt_hidden_disposition_type, modal_ng_add_disposition, callback) {
        var data = {
			"action" 		: "ng_return_disposition_details_by_fkqr",
            "fkqr"          : global_fkqr_ng
		} 
		call_ajax(data, handler_ts_qfr, function(result){
			if(result['disposition'] == '' && result['disposition_by'] == '' && result['disposition_date'] == '') {
                $('#container_ng_disposition input').prop('disabled',false);
                $('#container_ng_disposition select').prop('disabled',false);
                $('#container_ng_disposition textarea').prop('disabled',false);
                $('#container_ng_final_reply input').prop('disabled',false);
                $('#container_ng_final_reply select').prop('disabled',false);
                $('#container_ng_final_reply textarea').prop('disabled',false);
                
                $('#'+btn_ng_initial_dispo).hide();
                $('#'+lbl_ng_initial_dispo).show();
                $('#'+file_disposition).show();
                $('#'+lbl_ng_reupload_initial_dispo).hide();
                $('#'+container_ng_final_reply).hide();
                $('#'+btn_ng_submit_disposition).show();
                
                $('#'+file_final_reply).prop('required', false);                
                $('#'+file_disposition).attr('style', 'width:100%;display:inline-block;');                
                $('#'+txt_hidden_disposition_type).val('WITH TREATMENT');
                $('#'+modal_ng_add_disposition+' .modal-title').html('<i class="fa fa-plus-circle"></i> Add Disposition');
            } else if(result['final_reply_status'] == 'N/A' && result['final_reply_date'] == '' && result['final_reply_time'] == '') {
                $('#'+file_disposition).attr('style', 'width:60%;display:inline-block;');
                $('#'+file_disposition).prop('readOnly', false);
                $('#'+file_disposition).prop('disabled', true);

                $('#'+btn_ng_initial_dispo).show();
                $('#'+lbl_ng_initial_dispo).hide();
                $('#'+file_disposition).show();
                $('#'+btn_ng_final_dispo).hide();
                $('#'+lbl_ng_reupload_initial_dispo).show();
                $('#'+btn_ng_submit_disposition).show();
                $('#'+btn_ng_submit_disposition).text(' Update');
                $('#'+btn_ng_submit_disposition).attr('class','btn btn-info fa fa-edit');
                $('#'+file_final_reply).show();                 

                $('#'+container_ng_final_reply).hide();

                $('#'+txt_hidden_disposition_type).val(result['disposition']);
                $('#'+modal_ng_add_disposition+' .modal-title').html('<i class="fa fa-eye"></i> View Disposition');
            } else if(result['final_reply_status'] == 'REQUIRED' && result['final_reply_date'] == '' && result['final_reply_time'] == '') {
                $('#'+container_ng_final_reply+' input').prop('disabled',false);
                $('#'+container_ng_final_reply+' select').prop('disabled',false);
                $('#'+container_ng_final_reply+' textarea').prop('disabled',false);
                $('#'+container_ng_final_reply+' input').prop('required',true);
                $('#'+container_ng_final_reply+' select').prop('required',true);
                $('#'+file_final_reply).prop('required', true);

                $('#'+file_disposition).attr('style', 'width:60%;display:inline-block;');
                $('#'+file_disposition).prop('readOnly', false);
                $('#'+file_disposition).prop('disabled', true);

                $('#'+btn_ng_initial_dispo).show();
                $('#'+lbl_ng_initial_dispo).hide();
                $('#'+file_disposition).show();
                $('#'+btn_ng_final_dispo).hide();
                $('#'+lbl_ng_reupload_initial_dispo).show();
                $('#'+btn_ng_submit_disposition).show();
                $('#'+file_final_reply).show();  
                
                $('#'+container_ng_final_reply).show();

                $('#'+txt_ng_final_reply_date).attr({'min' : result['disposition_date']});
                $('#'+txt_hidden_disposition_type).val('WITH FINAL REPLY');
                $('#'+modal_ng_add_disposition+' .modal-title').html('<i class="fa fa-plus-circle"></i> Add Disposition');
            } else {
                $('#'+container_ng_disposition+' input').prop('disabled',false);
                $('#'+container_ng_disposition+' select').prop('disabled',false);
                $('#'+container_ng_disposition+' textarea').prop('disabled',false);
                $('#'+container_ng_final_reply+' input').prop('disabled',false);
                $('#'+container_ng_final_reply+' select').prop('disabled',false);
                $('#'+container_ng_final_reply+' textarea').prop('disabled',false);
                              
                $('#'+file_final_reply).hide();                
                $('#'+container_ng_disposition).show();
                $('#'+container_ng_final_reply).show();
                $('#'+btn_ng_submit_disposition).hide();       
                $('#'+lbl_ng_reupload_initial_dispo).hide();
                $('#'+lbl_ng_initial_dispo).show();
                $('#'+file_disposition).hide();
                $('#'+btn_ng_initial_dispo).show();
                $('#'+btn_ng_final_dispo).show();
                $('#'+modal_ng_add_disposition+' .modal-title').html('<i class="fa fa-eye"></i> View Disposal');
            }
            
            $('#'+btn_ng_initial_dispo).val(global_fkqr_ng);
            $('#'+txt_ng_sent_by).val(result['sent_by']);
            $('#'+txt_ng_sent_date_time).val(result['sent_date']);
            $('#'+txt_ng_sent_remarks).val(result['sent_remarks']);
            $('#'+txt_ng_disposition).val(result['disposition']);
            $('#'+txt_ng_disposition_by).val(result['disposition_by']);
            $('#'+txt_ng_disposition_date).val(result['disposition_date']);
            $('#'+txt_ng_disposition_time).val(result['disposition_time']);
            $('#'+txt_ng_disposition_remarks).val(result['disposition_remarks']);
            $('#'+cmb_ng_final_reply).val(result['final_reply']);
            $('#'+cmb_ng_final_reply_by).val(result['final_reply_by']);
            $('#'+txt_ng_final_reply_date).val(result['final_reply_date']);
            $('#'+txt_ng_final_reply_time).val(result['final_reply_time']);
            $('#'+cmb_ng_final_reply_remarks).val(result['final_reply_remarks']);
            $('#'+btn_ng_final_dispo).val(global_fkqr_ng);
            callback();
		});
    }
    
    function fn_get_ng_invoice_num_datalist(pattern,list_id){
        $('#'+list_id).empty();
        var data = {
            "action" : "get_ng_invoice_num_datalist",
            "pattern" : pattern
        }
        call_ajax(data, handler_ts_qfr, function(result){		
            console.log(result['html']);
            $('#'+list_id).append(result['html']);
		});
    }
    
    function fn_get_partname_by_partcode(part_code, txt_id) {
        var data = {
			"action" 		: "get_partname_by_partcode",
			"part_code"		: part_code
		} 
		call_ajax(data, handler_ts_qfr, function(result){
			$('#'+txt_id).val(result['part_name']);
		});
    }

	function fn_return_fiscal_year(cmb_id) {
		$('#'+cmb_id).empty();
        var data = {
			"action" 		: "get_fiscal_year"
		} 
		call_ajax(data, handler_ts_qfr, function(result){
			$('#'+cmb_id).append( result['html_select'] );
		});
	}
	
	function fn_get_supplier_list(cmb_id) {
		$('#'+cmb_id).empty();
		var data = {
			"action" 		: "get_supplier_list"
		} 
		call_ajax(data, handler_ts_qfr, function(result){
			$('#'+cmb_id).append( '<option value="">-</option>' );
			$('#'+cmb_id).append( result['html_select'] );
		});
	}
	/* **************************************************
		NG Report / Special Acceptance - End
	/***************************************************/
	
	/* ***************************
		Special Acceptance - Start
	/****************************/

	$(document).ready(function(){
		
		var dt_special_acceptance = $('#tbl_special_acceptance').DataTable({
			"aaSorting"	: [],
			"ajaxSource": "server_side_scripts/qr/dt_sa.php?username="+username,
			"rowCallback": function( row, data, index ) {
				if ( data[2] == "" ) {
					$(row).css("background-color","ffcccc");
				}
			}
		});
		
		setTimeout(function(){
			/* view or edit special acceptance */
			$('#tbl_special_acceptance tbody').on('click', 'tr .fa-edit', function(){
				$('#modal_sa_edit').data('id',this.id);
				fn_load_special_acceptance(this.id,'edit');
				$('#modal_sa_edit').modal('show');
				fn_sa_hide_text_fields('frm_sa_edit','');
			});
			$('#tbl_special_acceptance tbody').on('click', 'tr .fa-eye', function(){
				$('#modal_sa_edit').data('id',this.id);
				fn_load_special_acceptance(this.id,'view');
				$('#modal_sa_edit').modal('show');
				fn_sa_hide_text_fields('frm_sa_edit','');
			});
			$('#tbl_special_acceptance tbody').on('click', 'tr a#a_download_excel', function(){
				var pkid = $(this).data('id');
				var data = {
					"action"	: "download_sa_excel",
					"pkid"		: pkid
				}
				call_ajax(data, handler_ts_qfr, function(result){
					console.log(result);
					if(result['download_type'] == 0){
						window.location.href = "reports/excel_qfr_sa_report.php?pkid="+pkid;
					}else{
						window.location.href = "reports/excel_qfr_sa_report_download.php?file_path="+result['file_path'];
					}
				});
			});
			$('#tbl_special_acceptance tbody').on('click', 'tr .fa-remove', function(){
				var parts_and_prod_details = $(this).closest('tr').find('td:eq(0)').text();
				$('#frm_sa_cancel #label_info').text(parts_and_prod_details);
				$('#modal_sa_cancel').data('id',this.id);
				$('#modal_sa_cancel').modal('show');
			});
			$('#frm_sa_edit select[name="category"]').change(function(){
				var category = $(this).val();
				fn_sa_hide_text_fields('frm_sa_edit',category);
			});
		},500);
		
		fn_sa_hide_text_fields('frm_sa','');
		
		$('#frm_sa select[name="category"]').change(function(){
			var category = $(this).val();
			fn_sa_hide_text_fields('frm_sa',category);
		});	
		
		$('#btn_sa').click(function(){
			$('#modal_upload_sa').data('id',0);
			fn_empty_sa_fields('frm_sa');
			$('#modal_sa').modal('show');
		});
		
		$('#frm_sa input[name="po_number"]').keyup(function(e){
			var key = e.which;
			if(key == 38 || key == 40){
				return false;
			}
			var pattern = $(this).val();
			fn_get_po_list(pattern,'list_sa_po');
		});
		
		$('#frm_sa input[name="po_number"]').change(function(e){
			var po_number = $(this).val();
			fn_get_po_details(po_number,'frm_sa');
		});
		
		$('#frm_sa select[name="judged_by"]').change(function(){
			var judged_by = $(this).val();
			if (judged_by == "YEC QC"){
				$('#frm_sa #container_approver_name').hide();
				$('#container_approver_name .col-sm-4').empty();
			}else if(judged_by == "PMI Technical Adviser"){
				$('#frm_sa #container_approver_name').show();
				get_sa_approvers('frm_sa','judged_by_approver','Technical Adviser');
			}else if(judged_by == "Others"){
				$('#frm_sa #container_approver_name').show();
				get_sa_approvers('frm_sa','judged_by_approver','PMI');
			}
		});
		
		$('#frm_sa input[name="partcode"]').keyup(function(e){
			var key = e.which;
			if(key == 38 || key == 40){
				return false;
			}
			var pattern = $(this).val();
			fn_get_partcode_list(pattern,'list_sa_part_code');
		});
		
		$('#frm_sa input[name="partcode"]').change(function(e){
			var code = $(this).val();
			fn_get_partname(code,'frm_sa');
		});
		
		$('#btn_report_ordinates').click(function(){
			$('#modal_report_ordinates').modal('show');
		});
		
		$('#frm_sa').submit(function(e){
			e.preventDefault();
			var form_data = new FormData(this);
				form_data.append("action","save_special_acceptance");
				form_data.append("pkid",$('#modal_sa').data('id'));
				form_data.append("upload_type","new");
				form_data.append("username",username);
				fn_save_special_acceptance(form_data);
		});
		
		$('#frm_sa_edit #replace_image').click(function(){
			var attachment_pkid = $('#frm_sa_edit a[id="uploaded_image"]').data('id');
			$('#modal_sa_replace_image').data('id',attachment_pkid);
			$('#modal_sa_replace_image').modal('show');
		});
		
		$('#frm_sa_replace_image').submit(function(e){
			e.preventDefault();
			var form_data = new FormData(this);
				form_data.append("action","replace_sa_image");
				form_data.append("attachment_pkid",$('#modal_sa_replace_image').data('id'));
				form_data.append("username",username);
				fn_sa_replace_image(form_data);
		});
		
		$('#frm_sa_edit').submit(function(e){
			$(this).find('input').prop('disabled',false);
			$(this).find('select').prop('disabled',false);
			$(this).find('textarea').prop('disabled',false);
			e.preventDefault();
			var form_data = new FormData(this);
				form_data.append("action","edit_special_acceptance");
				form_data.append("pkid",$('#modal_sa_edit').data('id'));
				form_data.append("username",username);
			fn_edit_special_acceptance(form_data);
		});
		
		$('#frm_sa_edit select[name="judged_by"]').change(function(){
			var judged_by = $(this).val();
			if (judged_by == "YEC QC"){
				$('#frm_sa_edit #container_approver_name').hide();
				$('#container_approver_name .col-sm-4').empty();
			}else if(judged_by == "PMI Technical Adviser"){
				$('#frm_sa_edit #container_approver_name').show();
				get_sa_approvers('frm_sa_edit','judged_by_approver','Technical Adviser');
			}else if(judged_by == "Others"){
				$('#frm_sa_edit #container_approver_name').show();
				get_sa_approvers('frm_sa_edit','judged_by_approver','PMI');
			}
		});
		
		$('#frm_sa_cancel').submit(function(e){
			e.preventDefault();
			fn_cancel_special_acceptance();
		});
		
		function fn_save_special_acceptance(form_data){
			$.ajax({
				url		: handler_ts_qfr, 		// Url to which the request is send
				type	: "POST",           	// Type of request to be send, called as method
				dataType: "JSON",           	// Type of request to be send, called as method
				data	: form_data, 			// Data sent to server, a set of key/value pairs (i.e. form fields and values)
				contentType: false,       		// The content type used when sending data to the server.
				cache: false,             		// To unable request pages to be cached
				processData:false,        		// To send DOMDocument or non processed data file it is set to false
				success: function(result){  	// A function to be called if request succeeds
					console.log(result);
					$('.modal').modal('hide');
					dt_special_acceptance.ajax.reload();
				},error	: function(result){
					console.log(result+' error');
				}
			});
		}
		
		function fn_sa_replace_image(form_data){
			$.ajax({
				url		: handler_ts_qfr, 		// Url to which the request is send
				type	: "POST",           	// Type of request to be send, called as method
				dataType: "JSON",           	// Type of request to be send, called as method
				data	: form_data, 			// Data sent to server, a set of key/value pairs (i.e. form fields and values)
				contentType: false,       		// The content type used when sending data to the server.
				cache: false,             		// To unable request pages to be cached
				processData:false,        		// To send DOMDocument or non processed data file it is set to false
				success: function(result){  	// A function to be called if request succeeds
					console.log(result);
					$('#modal_sa_replace_image input').val('');
					$('#modal_sa_replace_image').modal('hide');
					fn_load_special_acceptance($('#modal_sa_edit').data('id'),'edit');
				},error	: function(result){
					console.log(result+' error');
				}
			});
		}
		
		function fn_edit_special_acceptance(form_data){
			call_ajax_attachment(form_data, handler_ts_qfr, function(result){
				console.log(result);
				$('#modal_sa_edit').modal('hide');
				$('#modal_sa_edit textarea').val("");
				dt_special_acceptance.ajax.reload();
			});
		}
		
		function fn_cancel_special_acceptance(form_data){
			var data = {
				"action"	: "cancel_special_acceptance",
				"pkid"		: $('#modal_sa_cancel').data('id'),
				"username"	: username
			}
			call_ajax_serialize(data, form_data,handler_ts_qfr, function(result){
				console.log(result);
				$('#modal_sa_cancel').modal('hide');
				dt_special_acceptance.ajax.reload();
			});
		}
		
		function fn_empty_sa_fields(frm_id){
			$('#'+frm_id+' #container_disposition').hide();
			$('#'+frm_id+' #container_disposition select,#frm_sa #container_disposition input').prop('required',false);
			$('#'+frm_id+' .alert').hide();
			$('#'+frm_id+' .alert').text('');
			$('#'+frm_id+' .alert').attr('class','alert alert-danger');
			$('#'+frm_id+' input').val('');
			$('#'+frm_id+' select').val('');
			$('#'+frm_id+' #container_approver_name').hide();
		}
		
		function fn_load_special_acceptance(pkid,mode){
			var data = {
				"action"	: "load_special_acceptance",
				"pkid"		: pkid
			}
			call_ajax(data, handler_ts_qfr, function(result){
				console.log(result);
				$('#frm_sa_edit .fa-save').show();
				$('#frm_sa_edit label[id="label_control_number"]').text('Control #: '+result['control_number']);
				$('#frm_sa_edit select[name="category"]').val(result['category']);
				fn_sa_hide_text_fields('frm_sa_edit',result['category']);
				$('#frm_sa_edit a[id="uploaded_image"]').attr("href",result['attached_file_link']);
				$('#frm_sa_edit a[id="uploaded_image"]').data("id",result['attachhment_pkid']);
				$('#frm_sa_edit a[id="uploaded_image"]').text(result['file_name']);
				if(result['category'] == 'Parts'){
					$('#frm_sa_edit input[name="partcode"]').val(result['part_code']);
					$('#frm_sa_edit input[name="parts_affected_parts"]').val(result['parts_affected_parts']);
					$('#frm_sa_edit input[name="problem_parts"]').val(result['problem_parts']);
					$('#frm_sa_edit input[name="supplier"]').val(result['supplier']);
					$('#frm_sa_edit input[name="lot_number"]').val(result['lot_number']);
					$('#frm_sa_edit input[name="quantity"]').val(result['quantity']);
				}else{
					$('#frm_sa_edit input[name="po_number"]').val(result['po_number']);
					$('#frm_sa_edit input[name="po_qty"]').val(result['po_qty']);
					$('#frm_sa_edit input[name="device_name"]').val(result['device_name']);
					$('#frm_sa_edit input[name="problem_device"]').val(result['problem_device']);
					$('#frm_sa_edit input[name="parts_affected_device"]').val(result['parts_affected_device']);
					$('#frm_sa_edit input[name="affected_qty"]').val(result['affected_quantity']);
					$('#frm_sa_edit input[name="customer_name"]').val(result['customer_name']);
					$('#frm_sa_edit input[name="shipment_date"]').val(result['shipment_date']);
				}
				$('#frm_sa_edit input[name="drawing_number"]').val(result['drawing_number']);
				$('#frm_sa_edit select[name="judged_by"]').val(result['judged_by']);
				$('#frm_sa_edit select[name="judgement_application"]').val(result['judgement_application']);
				$('#frm_sa_edit textarea[name="remarks"]').text(result['notations_remarks']);
				$('#frm_sa_edit #container_approver_name').hide();
				if(result['judged_by_approver'] != ''){
					$('#frm_sa_edit #container_approver_name').show();
					$('#container_approver_name .col-sm-4').empty();
					var judged_by = result['judged_by'];
					if(judged_by == "PMI Technical Adviser"){
						$('#frm_sa #container_approver_name').show();
						get_sa_approvers('frm_sa_edit','judged_by_approver','Technical Adviser');
					}else if(judged_by == "Others"){
						$('#frm_sa #container_approver_name').show();
						get_sa_approvers('frm_sa_edit','judged_by_approver','PMI');
					}
					setTimeout(function(){
						$('#frm_sa_edit #container_approver_name .col-sm-4 select').val(result['judged_by_approver']).trigger('chosen:updated');
					},100);
				}
				
				$('#container_yec_disposition').hide();
				$('#container_yec_disposition .col-sm-4').empty();
				
				if(mode == 'edit'){
					$('#frm_sa_edit #replace_image').prop('disabled',false);
					$('#frm_sa_edit #container_disposition').hide();
					$('#frm_sa_edit #container_remarks').hide();
					$('#frm_sa_edit input,#frm_sa_edit select').prop('disabled',false);
					get_sa_approvers('frm_sa_edit','judged_by_approver','');
				}
				if(mode == 'view'){
					$('#frm_sa_edit .fa-save').hide();
					setTimeout(function(){
						$('#frm_sa_edit #container_approver_name').hide();
					},100);
					$('#frm_sa_edit #replace_image').prop('disabled',true);
					$('#frm_sa_edit input,#frm_sa_edit select,#frm_sa_edit textarea').prop('disabled',true);
					if(result['status'] == 1){
						return;
					}
					/* check if the user is the approver */
					if( username == result['judged_by_approver'] ){
						$('#frm_sa_edit select[name="judgement_application"]').prop('disabled',false);
						$('#frm_sa_edit #container_disposition').show();
						$('#frm_sa_edit #container_remarks').show();
						$('#frm_sa_edit #container_remarks textarea').prop('disabled',false);
						$('#frm_sa_edit .fa-save').show();
					}else{
						if(result['judged_by'] == "YEC QC" && result['created_by'] == username){
							$('#container_yec_disposition').show();
							$('#container_yec_disposition .col-sm-4').append('<input type="file" class="form-control" name="file_yec_disposition">');
							$('#frm_sa_edit #container_disposition').show();
							$('#frm_sa_edit #container_remarks').show();
							$('#frm_sa_edit #container_remarks textarea').prop('disabled',true);
							$('#frm_sa_edit .fa-save').show();
						}else{
							$('#frm_sa_edit #container_disposition').hide();
							$('#frm_sa_edit #container_remarks').hide();
						}
					}
				}
			});
		}
			
		function fn_sa_hide_text_fields(frm_id,category){
			/* hide containers for parts and device */
			$('#'+frm_id+' input[name="drawing_number"]').val(""); //empty drawing number
			$('#'+frm_id+' #container_parts').hide();
			$('#'+frm_id+' #container_device').hide();
			$('#'+frm_id+' #container_parts select, #'+frm_id+' #container_parts input').prop('required',false);
			$('#'+frm_id+' #container_device select, #'+frm_id+' #container_device input').prop('required',false);
			if(category == 'Parts'){
				/* display parts container */
				$('#'+frm_id+' #container_parts').show();
				$('#'+frm_id+' #container_parts select, #'+frm_id+' #container_parts input').prop('required',true);
			}else if(category == 'Device'){
				/* display device container */
				$('#'+frm_id+' #container_device').show();
				$('#'+frm_id+' #container_device select, #'+frm_id+' #container_device input').prop('required',true);
			}
		}
		
		function get_sa_approvers(frm_id,select_name,approval_type){
			var action = "";
			if (approval_type == "YEC QC"){
				return false;
			}else if (approval_type == "PMI"){
				action = "get_report_approvers";
			}else if(approval_type == "Technical Adviser"){
				action = "get_report_approvers_technical_adviser";
			}
			var data = {
				"action"	: action
			}
			call_ajax(data, handler_ts_qfr, function(result){
				console.log(result);
				$('#container_approver_name .col-sm-4').empty();
				var html  = '<select data-placeholder="Select Approver" class="chosen-select form-control" name="judged_by_approver" id="judged_by_approver" required>';
					html += '</select>';
				$('#container_approver_name .col-sm-4').append(html);
				$('#'+frm_id+' select[name="'+select_name+'"]').empty();
				$('#'+frm_id+' select[name="'+select_name+'"]').append(result['html_select']);
				$('#'+frm_id+' select[name="'+select_name+'"]').chosen({
					width	:	"95%"
				});
			});
		}
		
		/* YPICS 4.0 */
		function fn_get_partcode_list(pattern,datalist_id){
			var data = {
				"action"	: "get_partcode_list",
				"pattern"	: pattern
			}
			call_ajax(data, handler_ts_qfr, function(result){
				console.log(result);
				$('#'+datalist_id).empty();
				for(x=0;x<result['part_code'].length;x++){
					$('#'+datalist_id).append('<option>'+result['part_code'][x]+'</option>');
				}
			});
		}
		
		function fn_get_partname(code,frm_id){
			var data = {
				"action"	: "get_partname_by_partcode",
				"part_code"	: code
			}
			call_ajax(data, handler_ts_qfr, function(result){
				console.log(result);
				$('#'+frm_id+' input[name="parts_affected_parts"]').val(result['part_name']);
				$('#'+frm_id+' input[name="drawing_number"]').val(result['drawing_number']);
				$('#'+frm_id+' input[name="supplier"]').val(result['supplier']);
			});
		}
		
		function fn_get_po_list(pattern,datalist_id){
			var data = {
				"action"	: "get_po_list",
				"pattern"	: pattern
			}
			call_ajax(data, handler_ts_qfr, function(result){
				console.log(result);
				$('#'+datalist_id).empty();
				for(x=0;x<result['po_number'].length;x++){
					$('#'+datalist_id).append('<option>'+result['po_number'][x]+'</option>');
				}
			});
		}
		
		function fn_get_po_details(po_number,frm_id){
			var data = {
				"action"	: "get_po_details",
				"po_number"	: po_number
			}
			call_ajax(data, handler_ts_qfr, function(result){
				console.log(result);
				$('#'+frm_id+' input[name="device_name"]').val(result['device_name']);
				$('#'+frm_id+' input[name="po_qty"]').val(result['po_qty']);
				$('#'+frm_id+' input[name="drawing_number"]').val(result['drawing_number']);
				$('#'+frm_id+' input[name="customer_name"]').val(result['customer_name']);
				// $('#'+frm_id+' input[name="parts_affected_device"]').val(result['device_name']);
			});
		}
	});
	/* ***************************
		Special Acceptance - End
	/****************************/
	
	/* ***************************
		Attention Tag - Start
	/****************************/
	var dt_tbl_attention_tag = $('#tbl_attention_tag').DataTable({
		"aaSorting"	: [],
		"ajaxSource": "server_side_scripts/qr/dt_at.php?username="+username
	});
	
	$('#btn_attention_tag_new').click(function(){
		$('#modal_itn_attention_tag').modal('show');
	});
	
	$('#frm_attention_tag_new').submit(function(e){
		e.preventDefault();
		var serialized_data = $(this).serialize();
		fn_save_attention_tag(serialized_data);
	});
	
	function fn_save_attention_tag(serialized_data){
		$('.btn').attr('disabled',true);
		var data = {
			"action"	:  "save_attention_tag",
			"username"	: username
		}
		call_ajax_serialize(data, serialized_data, handler_ts_qfr, function(result){
			console.log(result);
			$('.modal').modal('hide');
			$('.btn').attr('disabled',false);
			$('#frm_attention_tag_new input').val("");
			$('#frm_attention_tag_new select').val("");
			$('#frm_attention_tag_new textarea').val("");
			dt_tbl_attention_tag.ajax.reload();
			// $('#modal_system_notification').modal('show');
			// setTimeout(function(){
				// $('.modal').modal('hide');	
			// },800);
		});
	}
	
	/* ***************************
		Attention Tag - Start
	/****************************/
	
	/* ***************************
		Test Functions - Start
	/****************************/
	setTimeout(function(){
		// fn_display_sub_page('container_itn');
		fn_display_sub_page('container_sa');
	},100);
	// $('#modal_itn_attention_tag').modal('show');
	
	/* ***************************
		Test Functions - End
	/****************************/
</script>

